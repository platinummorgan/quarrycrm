SKIP_DOCKER=1 set ΓÇö skipping global DB setup
{"numTotalTestSuites":186,"numPassedTestSuites":173,"numFailedTestSuites":13,"numPendingTestSuites":0,"numTotalTests":445,"numPassedTests":431,"numFailedTests":14,"numPendingTests":0,"numTodoTests":0,"snapshot":{"added":0,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0,"didUpdate":false},"startTime":1760733112175,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["Audit Chain","canonicalizeAuditRecord"],"fullName":"Audit Chain canonicalizeAuditRecord should produce deterministic JSON output","status":"passed","title":"should produce deterministic JSON output","duration":1.4926999999999566,"failureMessages":[],"meta":{}},{"ancestorTitles":["Audit Chain","canonicalizeAuditRecord"],"fullName":"Audit Chain canonicalizeAuditRecord should sort keys alphabetically","status":"passed","title":"should sort keys alphabetically","duration":0.48619999999999663,"failureMessages":[],"meta":{}},{"ancestorTitles":["Audit Chain","canonicalizeAuditRecord"],"fullName":"Audit Chain canonicalizeAuditRecord should exclude hash fields","status":"passed","title":"should exclude hash fields","duration":0.30819999999999936,"failureMessages":[],"meta":{}},{"ancestorTitles":["Audit Chain","canonicalizeAuditRecord"],"fullName":"Audit Chain canonicalizeAuditRecord should exclude id field","status":"passed","title":"should exclude id field","duration":0.1017999999999688,"failureMessages":[],"meta":{}},{"ancestorTitles":["Audit Chain","canonicalizeAuditRecord"],"fullName":"Audit Chain canonicalizeAuditRecord should normalize null values","status":"passed","title":"should normalize null values","duration":0.16900000000003956,"failureMessages":[],"meta":{}},{"ancestorTitles":["Audit Chain","canonicalizeAuditRecord"],"fullName":"Audit Chain canonicalizeAuditRecord should handle complex eventData","status":"passed","title":"should handle complex eventData","duration":0.11730000000000018,"failureMessages":[],"meta":{}},{"ancestorTitles":["Audit Chain","computeAuditHash"],"fullName":"Audit Chain computeAuditHash should return 64-character hex string (SHA-256)","status":"passed","title":"should return 64-character hex string (SHA-256)","duration":0.3686999999999898,"failureMessages":[],"meta":{}},{"ancestorTitles":["Audit Chain","computeAuditHash"],"fullName":"Audit Chain computeAuditHash should be deterministic (same input = same hash)","status":"passed","title":"should be deterministic (same input = same hash)","duration":0.10050000000001091,"failureMessages":[],"meta":{}},{"ancestorTitles":["Audit Chain","computeAuditHash"],"fullName":"Audit Chain computeAuditHash should change if data changes","status":"passed","title":"should change if data changes","duration":0.3342999999999847,"failureMessages":[],"meta":{}},{"ancestorTitles":["Audit Chain","computeAuditHash"],"fullName":"Audit Chain computeAuditHash should not change if hash fields change (excluded)","status":"passed","title":"should not change if hash fields change (excluded)","duration":0.15480000000002292,"failureMessages":[],"meta":{}},{"ancestorTitles":["Audit Chain","computeAuditHash"],"fullName":"Audit Chain computeAuditHash should not change if id changes (excluded)","status":"passed","title":"should not change if id changes (excluded)","duration":0.15499999999997272,"failureMessages":[],"meta":{}},{"ancestorTitles":["Audit Chain","computeChainHashes"],"fullName":"Audit Chain computeChainHashes should return prevHash and selfHash","status":"passed","title":"should return prevHash and selfHash","duration":0.21059999999999945,"failureMessages":[],"meta":{}},{"ancestorTitles":["Audit Chain","computeChainHashes"],"fullName":"Audit Chain computeChainHashes should set prevHash to null for genesis record","status":"passed","title":"should set prevHash to null for genesis record","duration":0.06979999999998654,"failureMessages":[],"meta":{}},{"ancestorTitles":["Audit Chain","computeChainHashes"],"fullName":"Audit Chain computeChainHashes should set prevHash to provided value","status":"passed","title":"should set prevHash to provided value","duration":0.05819999999999936,"failureMessages":[],"meta":{}},{"ancestorTitles":["Audit Chain","computeChainHashes"],"fullName":"Audit Chain computeChainHashes should compute valid selfHash","status":"passed","title":"should compute valid selfHash","duration":0.07709999999997308,"failureMessages":[],"meta":{}},{"ancestorTitles":["Audit Chain","verifyAuditChain"],"fullName":"Audit Chain verifyAuditChain should return valid for empty chain","status":"passed","title":"should return valid for empty chain","duration":0.5448000000000093,"failureMessages":[],"meta":{}},{"ancestorTitles":["Audit Chain","verifyAuditChain"],"fullName":"Audit Chain verifyAuditChain should verify genesis record (null prevHash)","status":"passed","title":"should verify genesis record (null prevHash)","duration":0.1694999999999709,"failureMessages":[],"meta":{}},{"ancestorTitles":["Audit Chain","verifyAuditChain"],"fullName":"Audit Chain verifyAuditChain should fail if genesis has non-null prevHash","status":"passed","title":"should fail if genesis has non-null prevHash","duration":0.24389999999999645,"failureMessages":[],"meta":{}},{"ancestorTitles":["Audit Chain","verifyAuditChain"],"fullName":"Audit Chain verifyAuditChain should verify valid chain with multiple records","status":"passed","title":"should verify valid chain with multiple records","duration":0.18360000000001264,"failureMessages":[],"meta":{}},{"ancestorTitles":["Audit Chain","verifyAuditChain"],"fullName":"Audit Chain verifyAuditChain should detect tampered selfHash","status":"passed","title":"should detect tampered selfHash","duration":0.20229999999997972,"failureMessages":[],"meta":{}},{"ancestorTitles":["Audit Chain","verifyAuditChain"],"fullName":"Audit Chain verifyAuditChain should detect broken chain (prevHash mismatch)","status":"passed","title":"should detect broken chain (prevHash mismatch)","duration":0.21809999999999263,"failureMessages":[],"meta":{}},{"ancestorTitles":["Audit Chain","verifyAuditChain"],"fullName":"Audit Chain verifyAuditChain should detect out-of-order records","status":"passed","title":"should detect out-of-order records","duration":0.14159999999998263,"failureMessages":[],"meta":{}},{"ancestorTitles":["Audit Chain","verifyAuditChain"],"fullName":"Audit Chain verifyAuditChain should detect multiple errors in chain","status":"passed","title":"should detect multiple errors in chain","duration":0.11119999999999663,"failureMessages":[],"meta":{}},{"ancestorTitles":["Audit Chain","verifyAuditChain"],"fullName":"Audit Chain verifyAuditChain should verify long chain","status":"passed","title":"should verify long chain","duration":1.1330999999999563,"failureMessages":[],"meta":{}},{"ancestorTitles":["Audit Chain","Chain Security Properties"],"fullName":"Audit Chain Chain Security Properties should detect inserted record (breaks prevHash chain)","status":"passed","title":"should detect inserted record (breaks prevHash chain)","duration":0.18779999999998154,"failureMessages":[],"meta":{}},{"ancestorTitles":["Audit Chain","Chain Security Properties"],"fullName":"Audit Chain Chain Security Properties should detect modified eventData (changes selfHash)","status":"passed","title":"should detect modified eventData (changes selfHash)","duration":0.09390000000001919,"failureMessages":[],"meta":{}},{"ancestorTitles":["Audit Chain","Chain Security Properties"],"fullName":"Audit Chain Chain Security Properties should detect deleted record (breaks prevHash of next record)","status":"passed","title":"should detect deleted record (breaks prevHash of next record)","duration":0.13949999999999818,"failureMessages":[],"meta":{}}],"startTime":1760733130268,"endTime":1760733130276.1394,"status":"passed","message":"","name":"D:/Dev/CRM/__tests__/audit-chain.test.ts"},{"assertionResults":[{"ancestorTitles":[],"fullName":"db reset helper exists","status":"passed","title":"db reset helper exists","duration":575.2863,"failureMessages":[],"meta":{}}],"startTime":1760733127785,"endTime":1760733128360.2864,"status":"passed","message":"","name":"D:/Dev/CRM/__tests__/db-reset.test.ts"},{"assertionResults":[{"ancestorTitles":["Demo Protection","isDemoSession"],"fullName":"Demo Protection isDemoSession should return true if session.user.isDemo is true","status":"passed","title":"should return true if session.user.isDemo is true","duration":1.3091999999999189,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Protection","isDemoSession"],"fullName":"Demo Protection isDemoSession should return true if currentOrg.role is DEMO","status":"passed","title":"should return true if currentOrg.role is DEMO","duration":0.1753999999999678,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Protection","isDemoSession"],"fullName":"Demo Protection isDemoSession should return false if not demo","status":"passed","title":"should return false if not demo","duration":0.11310000000003129,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Protection","isDemoSession"],"fullName":"Demo Protection isDemoSession should return false if no session","status":"passed","title":"should return false if no session","duration":0.14689999999995962,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Protection","withDemoProtection"],"fullName":"Demo Protection withDemoProtection should block POST requests for demo users","status":"passed","title":"should block POST requests for demo users","duration":3.592800000000011,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Protection","withDemoProtection"],"fullName":"Demo Protection withDemoProtection should block PUT requests for demo users","status":"passed","title":"should block PUT requests for demo users","duration":0.8120999999999867,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Protection","withDemoProtection"],"fullName":"Demo Protection withDemoProtection should block PATCH requests for demo users","status":"passed","title":"should block PATCH requests for demo users","duration":0.5449999999999591,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Protection","withDemoProtection"],"fullName":"Demo Protection withDemoProtection should block DELETE requests for demo users","status":"passed","title":"should block DELETE requests for demo users","duration":0.421799999999962,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Protection","withDemoProtection"],"fullName":"Demo Protection withDemoProtection should allow GET requests for demo users","status":"passed","title":"should allow GET requests for demo users","duration":1.9084000000000287,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Protection","withDemoProtection"],"fullName":"Demo Protection withDemoProtection should allow HEAD requests for demo users","status":"passed","title":"should allow HEAD requests for demo users","duration":0.5606000000000222,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Protection","withDemoProtection"],"fullName":"Demo Protection withDemoProtection should allow write requests for non-demo users","status":"passed","title":"should allow write requests for non-demo users","duration":0.752399999999966,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Protection","withDemoProtection"],"fullName":"Demo Protection withDemoProtection should allow write requests when no session","status":"passed","title":"should allow write requests when no session","duration":0.5181999999999789,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Protection","isDemoOrganization"],"fullName":"Demo Protection isDemoOrganization should return true if orgId matches DEMO_ORG_ID","status":"passed","title":"should return true if orgId matches DEMO_ORG_ID","duration":0.1251999999999498,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Protection","isDemoOrganization"],"fullName":"Demo Protection isDemoOrganization should return false if orgId does not match DEMO_ORG_ID","status":"passed","title":"should return false if orgId does not match DEMO_ORG_ID","duration":0.07849999999996271,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Protection","isDemoOrganization"],"fullName":"Demo Protection isDemoOrganization should return false if DEMO_ORG_ID not set","status":"passed","title":"should return false if DEMO_ORG_ID not set","duration":0.06100000000003547,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Protection","getDemoOrgId"],"fullName":"Demo Protection getDemoOrgId should return DEMO_ORG_ID env var","status":"passed","title":"should return DEMO_ORG_ID env var","duration":0.09519999999997708,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Protection","getDemoOrgId"],"fullName":"Demo Protection getDemoOrgId should return undefined if not set","status":"passed","title":"should return undefined if not set","duration":0.07740000000001146,"failureMessages":[],"meta":{}}],"startTime":1760733130704,"endTime":1760733130716.0774,"status":"passed","message":"","name":"D:/Dev/CRM/__tests__/demo-protection.test.ts"},{"assertionResults":[{"ancestorTitles":["Demo Subdomain Middleware","Demo subdomain detection"],"fullName":"Demo Subdomain Middleware Demo subdomain detection should detect demo.example.com as demo subdomain","status":"passed","title":"should detect demo.example.com as demo subdomain","duration":1.059599999999989,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Subdomain Middleware","Demo subdomain detection"],"fullName":"Demo Subdomain Middleware Demo subdomain detection should not detect regular domains as demo subdomain","status":"passed","title":"should not detect regular domains as demo subdomain","duration":0.28160000000002583,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Subdomain Middleware","X-Robots-Tag header"],"fullName":"Demo Subdomain Middleware X-Robots-Tag header should set noindex,nofollow for demo subdomain","status":"passed","title":"should set noindex,nofollow for demo subdomain","duration":0.08589999999998099,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Subdomain Middleware","X-Robots-Tag header"],"fullName":"Demo Subdomain Middleware X-Robots-Tag header should set noindex,nofollow for preview environment","status":"passed","title":"should set noindex,nofollow for preview environment","duration":0.09940000000000282,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Subdomain Middleware","Write operation blocking"],"fullName":"Demo Subdomain Middleware Write operation blocking should block POST on demo subdomain","status":"passed","title":"should block POST on demo subdomain","duration":0.13450000000000273,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Subdomain Middleware","Write operation blocking"],"fullName":"Demo Subdomain Middleware Write operation blocking should block PUT on demo subdomain","status":"passed","title":"should block PUT on demo subdomain","duration":0.10210000000000719,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Subdomain Middleware","Write operation blocking"],"fullName":"Demo Subdomain Middleware Write operation blocking should block PATCH on demo subdomain","status":"passed","title":"should block PATCH on demo subdomain","duration":0.1349999999999909,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Subdomain Middleware","Write operation blocking"],"fullName":"Demo Subdomain Middleware Write operation blocking should block DELETE on demo subdomain","status":"passed","title":"should block DELETE on demo subdomain","duration":0.07780000000002474,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Subdomain Middleware","Write operation blocking"],"fullName":"Demo Subdomain Middleware Write operation blocking should allow GET on demo subdomain","status":"passed","title":"should allow GET on demo subdomain","duration":0.13199999999994816,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Subdomain Middleware","Write operation blocking"],"fullName":"Demo Subdomain Middleware Write operation blocking should allow auth endpoints on demo subdomain","status":"passed","title":"should allow auth endpoints on demo subdomain","duration":0.09839999999996962,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Subdomain Middleware","Write operation blocking"],"fullName":"Demo Subdomain Middleware Write operation blocking should allow demo-reset endpoint on demo subdomain","status":"passed","title":"should allow demo-reset endpoint on demo subdomain","duration":0.06700000000000728,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Subdomain Middleware","Write operation blocking"],"fullName":"Demo Subdomain Middleware Write operation blocking should not block writes on non-demo subdomain","status":"passed","title":"should not block writes on non-demo subdomain","duration":0.04610000000002401,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Subdomain Middleware","Error responses"],"fullName":"Demo Subdomain Middleware Error responses should return proper error structure for demo subdomain block","status":"passed","title":"should return proper error structure for demo subdomain block","duration":0.13240000000001828,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Subdomain Middleware","Error responses"],"fullName":"Demo Subdomain Middleware Error responses should return proper error structure for demo user block","status":"passed","title":"should return proper error structure for demo user block","duration":0.066599999999994,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Subdomain Middleware","Belt-and-suspenders approach"],"fullName":"Demo Subdomain Middleware Belt-and-suspenders approach should have both subdomain and user-based checks","status":"passed","title":"should have both subdomain and user-based checks","duration":0.056500000000028194,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Subdomain Middleware","Belt-and-suspenders approach"],"fullName":"Demo Subdomain Middleware Belt-and-suspenders approach should block if either check fails","status":"passed","title":"should block if either check fails","duration":0.19790000000000418,"failureMessages":[],"meta":{}}],"startTime":1760733133658,"endTime":1760733133661.198,"status":"passed","message":"","name":"D:/Dev/CRM/__tests__/demo-subdomain.test.ts"},{"assertionResults":[{"ancestorTitles":["Demo Token Security","Token Generation"],"fullName":"Demo Token Security Token Generation should generate a valid token with all required fields","status":"passed","title":"should generate a valid token with all required fields","duration":1.755299999999977,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Token Security","Token Generation"],"fullName":"Demo Token Security Token Generation should generate a token with host pinning","status":"passed","title":"should generate a token with host pinning","duration":0.9031999999999698,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Token Security","Token Generation"],"fullName":"Demo Token Security Token Generation should generate unique JTI for each token","status":"passed","title":"should generate unique JTI for each token","duration":0.6650000000000205,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Token Security","Expiration Enforcement (Γëñ 15 minutes)"],"fullName":"Demo Token Security Expiration Enforcement (Γëñ 15 minutes) should accept token with 15 minute expiration","status":"passed","title":"should accept token with 15 minute expiration","duration":0.3313999999999737,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Token Security","Expiration Enforcement (Γëñ 15 minutes)"],"fullName":"Demo Token Security Expiration Enforcement (Γëñ 15 minutes) should reject token with expiration > 15 minutes","status":"passed","title":"should reject token with expiration > 15 minutes","duration":1.3824000000000183,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Token Security","Expiration Enforcement (Γëñ 15 minutes)"],"fullName":"Demo Token Security Expiration Enforcement (Γëñ 15 minutes) should reject expired token","status":"passed","title":"should reject expired token","duration":0.37599999999997635,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Token Security","IAT Skew Validation"],"fullName":"Demo Token Security IAT Skew Validation should accept token with current timestamp","status":"passed","title":"should accept token with current timestamp","duration":0.2728999999999928,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Token Security","IAT Skew Validation"],"fullName":"Demo Token Security IAT Skew Validation should reject token with IAT too far in future","status":"passed","title":"should reject token with IAT too far in future","duration":0.25689999999997326,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Token Security","IAT Skew Validation"],"fullName":"Demo Token Security IAT Skew Validation should reject token with IAT too old","status":"passed","title":"should reject token with IAT too old","duration":0.3412000000000148,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Token Security","Replay Protection (JTI)"],"fullName":"Demo Token Security Replay Protection (JTI) should store JTI after first use","status":"passed","title":"should store JTI after first use","duration":0.41149999999998954,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Token Security","Replay Protection (JTI)"],"fullName":"Demo Token Security Replay Protection (JTI) should reject token used twice (replay attack)","status":"passed","title":"should reject token used twice (replay attack)","duration":0.6147000000000276,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Token Security","Replay Protection (JTI)"],"fullName":"Demo Token Security Replay Protection (JTI) should have unique JTI for each token","status":"passed","title":"should have unique JTI for each token","duration":0.2639000000000351,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Token Security","Replay Protection (JTI)"],"fullName":"Demo Token Security Replay Protection (JTI) should store JTI with correct TTL","status":"passed","title":"should store JTI with correct TTL","duration":0.27710000000001855,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Token Security","Host Pinning"],"fullName":"Demo Token Security Host Pinning should accept token on correct host","status":"passed","title":"should accept token on correct host","duration":0.2074000000000069,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Token Security","Host Pinning"],"fullName":"Demo Token Security Host Pinning should reject token on wrong host","status":"passed","title":"should reject token on wrong host","duration":0.2851999999999748,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Token Security","Host Pinning"],"fullName":"Demo Token Security Host Pinning should normalize hosts for comparison","status":"passed","title":"should normalize hosts for comparison","duration":0.20170000000001664,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Token Security","Host Pinning"],"fullName":"Demo Token Security Host Pinning should work without host pinning (optional)","status":"passed","title":"should work without host pinning (optional)","duration":0.2540000000000191,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Token Security","Host Pinning"],"fullName":"Demo Token Security Host Pinning should skip validation if token has no host","status":"passed","title":"should skip validation if token has no host","duration":0.13659999999998718,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Token Security","Payload Validation"],"fullName":"Demo Token Security Payload Validation should reject token with missing orgId","status":"passed","title":"should reject token with missing orgId","duration":0.21320000000002892,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Token Security","Payload Validation"],"fullName":"Demo Token Security Payload Validation should reject token with wrong role","status":"passed","title":"should reject token with wrong role","duration":0.20659999999998035,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Token Security","Payload Validation"],"fullName":"Demo Token Security Payload Validation should reject token with missing JTI","status":"passed","title":"should reject token with missing JTI","duration":0.3815999999999917,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Token Security","Error Handling"],"fullName":"Demo Token Security Error Handling should reject token with invalid signature","status":"passed","title":"should reject token with invalid signature","duration":0.27490000000000236,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Token Security","Error Handling"],"fullName":"Demo Token Security Error Handling should reject malformed token","status":"passed","title":"should reject malformed token","duration":0.18080000000003338,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Token Security","Error Handling"],"fullName":"Demo Token Security Error Handling should provide descriptive error messages","status":"passed","title":"should provide descriptive error messages","duration":0.36820000000000164,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Token Security","Integration Scenarios"],"fullName":"Demo Token Security Integration Scenarios should handle full token lifecycle","status":"passed","title":"should handle full token lifecycle","duration":1.4397000000000162,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo Token Security","Integration Scenarios"],"fullName":"Demo Token Security Integration Scenarios should enforce all security checks in order","status":"passed","title":"should enforce all security checks in order","duration":0.2330000000000041,"failureMessages":[],"meta":{}}],"startTime":1760733129775,"endTime":1760733129787.4397,"status":"passed","message":"","name":"D:/Dev/CRM/__tests__/demo-token-security.test.ts"},{"assertionResults":[{"ancestorTitles":[],"fullName":"encrypt -> decrypt and search token format","status":"passed","title":"encrypt -> decrypt and search token format","duration":3.729499999999973,"failureMessages":[],"meta":{}}],"startTime":1760733132129,"endTime":1760733132132.7295,"status":"passed","message":"","name":"D:/Dev/CRM/__tests__/field-encryption.smoke.test.ts"},{"assertionResults":[{"ancestorTitles":["Field Encryption","encryptField"],"fullName":"Field Encryption encryptField should encrypt a plaintext value","status":"passed","title":"should encrypt a plaintext value","duration":3.90930000000003,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","encryptField"],"fullName":"Field Encryption encryptField should return empty string for empty input","status":"passed","title":"should return empty string for empty input","duration":0.19009999999997262,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","encryptField"],"fullName":"Field Encryption encryptField should generate different ciphertext for same plaintext (random nonce)","status":"passed","title":"should generate different ciphertext for same plaintext (random nonce)","duration":1.498899999999992,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","encryptField"],"fullName":"Field Encryption encryptField should include version prefix","status":"passed","title":"should include version prefix","duration":0.9323999999999728,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","decryptField"],"fullName":"Field Encryption decryptField should decrypt an encrypted value","status":"passed","title":"should decrypt an encrypted value","duration":1.6251000000000317,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","decryptField"],"fullName":"Field Encryption decryptField should return empty string for empty input","status":"passed","title":"should return empty string for empty input","duration":0.19500000000005002,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","decryptField"],"fullName":"Field Encryption decryptField should decrypt long strings","status":"passed","title":"should decrypt long strings","duration":1.2577999999999747,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","decryptField"],"fullName":"Field Encryption decryptField should decrypt unicode characters","status":"passed","title":"should decrypt unicode characters","duration":1.4995000000000118,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","decryptField"],"fullName":"Field Encryption decryptField should throw error for invalid format","status":"passed","title":"should throw error for invalid format","duration":0.8192000000000235,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","decryptField"],"fullName":"Field Encryption decryptField should throw error for tampered ciphertext","status":"passed","title":"should throw error for tampered ciphertext","duration":8.58710000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","makeSearchToken"],"fullName":"Field Encryption makeSearchToken should create deterministic hash","status":"passed","title":"should create deterministic hash","duration":0.44230000000004566,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","makeSearchToken"],"fullName":"Field Encryption makeSearchToken should return empty string for empty input","status":"passed","title":"should return empty string for empty input","duration":0.13949999999999818,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","makeSearchToken"],"fullName":"Field Encryption makeSearchToken should create different hashes for different values","status":"passed","title":"should create different hashes for different values","duration":0.13849999999996498,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","makeSearchToken"],"fullName":"Field Encryption makeSearchToken should be case-insensitive","status":"passed","title":"should be case-insensitive","duration":0.09790000000003829,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","makeSearchToken"],"fullName":"Field Encryption makeSearchToken should trim whitespace","status":"passed","title":"should trim whitespace","duration":0.07840000000004466,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","makeSearchToken"],"fullName":"Field Encryption makeSearchToken should produce 64-character hex string","status":"passed","title":"should produce 64-character hex string","duration":0.155399999999986,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","isEncrypted"],"fullName":"Field Encryption isEncrypted should detect encrypted values","status":"passed","title":"should detect encrypted values","duration":0.6299999999999955,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","isEncrypted"],"fullName":"Field Encryption isEncrypted should return false for plaintext","status":"passed","title":"should return false for plaintext","duration":0.10840000000001737,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","isEncrypted"],"fullName":"Field Encryption isEncrypted should return false for empty string","status":"passed","title":"should return false for empty string","duration":0.053999999999973625,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","isEncrypted"],"fullName":"Field Encryption isEncrypted should return false for invalid format","status":"passed","title":"should return false for invalid format","duration":0.03550000000001319,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","getEncryptionVersion"],"fullName":"Field Encryption getEncryptionVersion should extract version from encrypted value","status":"passed","title":"should extract version from encrypted value","duration":0.47910000000001673,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","getEncryptionVersion"],"fullName":"Field Encryption getEncryptionVersion should return null for plaintext","status":"passed","title":"should return null for plaintext","duration":0.06639999999998736,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","getEncryptionVersion"],"fullName":"Field Encryption getEncryptionVersion should return null for empty string","status":"passed","title":"should return null for empty string","duration":0.03499999999996817,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","rotateFieldKey"],"fullName":"Field Encryption rotateFieldKey should re-encrypt with new key version","status":"passed","title":"should re-encrypt with new key version","duration":1.3605000000000018,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","rotateFieldKey"],"fullName":"Field Encryption rotateFieldKey should preserve plaintext after rotation","status":"passed","title":"should preserve plaintext after rotation","duration":1.2022000000000048,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","encryptFields"],"fullName":"Field Encryption encryptFields should encrypt multiple fields","status":"passed","title":"should encrypt multiple fields","duration":1.20089999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","encryptFields"],"fullName":"Field Encryption encryptFields should skip empty values","status":"passed","title":"should skip empty values","duration":0.43319999999999936,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","decryptFields"],"fullName":"Field Encryption decryptFields should decrypt multiple fields","status":"passed","title":"should decrypt multiple fields","duration":1.3763000000000147,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","decryptFields"],"fullName":"Field Encryption decryptFields should return empty string for decryption failures","status":"passed","title":"should return empty string for decryption failures","duration":1.0503999999999678,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","Key Generation"],"fullName":"Field Encryption Key Generation should generate valid encryption key","status":"passed","title":"should generate valid encryption key","duration":0.17180000000001883,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","Key Generation"],"fullName":"Field Encryption Key Generation should generate different keys each time","status":"passed","title":"should generate different keys each time","duration":0.09629999999998518,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","Key Generation"],"fullName":"Field Encryption Key Generation should generate valid search salt","status":"passed","title":"should generate valid search salt","duration":0.08819999999997208,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","Security Properties"],"fullName":"Field Encryption Security Properties should use authenticated encryption (tamper detection)","status":"passed","title":"should use authenticated encryption (tamper detection)","duration":1.377900000000011,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","Security Properties"],"fullName":"Field Encryption Security Properties should use different nonce for each encryption","status":"passed","title":"should use different nonce for each encryption","duration":0.6975999999999658,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","Security Properties"],"fullName":"Field Encryption Security Properties should use 96-bit nonces for AES-GCM (12 bytes = 24 hex chars)","status":"passed","title":"should use 96-bit nonces for AES-GCM (12 bytes = 24 hex chars)","duration":0.3657000000000039,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","Security Properties"],"fullName":"Field Encryption Security Properties should use 128-bit auth tags (16 bytes = 32 hex chars)","status":"passed","title":"should use 128-bit auth tags (16 bytes = 32 hex chars)","duration":0.4701000000000022,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","Edge Cases"],"fullName":"Field Encryption Edge Cases should handle very long strings","status":"passed","title":"should handle very long strings","duration":0.6816000000000031,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","Edge Cases"],"fullName":"Field Encryption Edge Cases should handle special characters","status":"passed","title":"should handle special characters","duration":0.599899999999991,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","Edge Cases"],"fullName":"Field Encryption Edge Cases should handle newlines and whitespace","status":"passed","title":"should handle newlines and whitespace","duration":0.5865000000000009,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","Edge Cases"],"fullName":"Field Encryption Edge Cases should handle empty object for encryptFields","status":"passed","title":"should handle empty object for encryptFields","duration":0.14910000000003265,"failureMessages":[],"meta":{}},{"ancestorTitles":["Field Encryption","Edge Cases"],"fullName":"Field Encryption Edge Cases should handle empty object for decryptFields","status":"passed","title":"should handle empty object for decryptFields","duration":0.061800000000005184,"failureMessages":[],"meta":{}}],"startTime":1760733129342,"endTime":1760733129379.0618,"status":"passed","message":"","name":"D:/Dev/CRM/__tests__/field-encryption.test.ts"},{"assertionResults":[{"ancestorTitles":["Email Masking"],"fullName":"Email Masking should mask standard email addresses","status":"passed","title":"should mask standard email addresses","duration":1.0311000000000377,"failureMessages":[],"meta":{}},{"ancestorTitles":["Email Masking"],"fullName":"Email Masking should handle single character local part","status":"passed","title":"should handle single character local part","duration":0.20629999999999882,"failureMessages":[],"meta":{}},{"ancestorTitles":["Email Masking"],"fullName":"Email Masking should handle very long local parts","status":"passed","title":"should handle very long local parts","duration":0.1128999999999678,"failureMessages":[],"meta":{}},{"ancestorTitles":["Email Masking"],"fullName":"Email Masking should handle null and undefined","status":"passed","title":"should handle null and undefined","duration":0.11959999999999127,"failureMessages":[],"meta":{}},{"ancestorTitles":["Email Masking"],"fullName":"Email Masking should handle empty string","status":"passed","title":"should handle empty string","duration":0.0654999999999859,"failureMessages":[],"meta":{}},{"ancestorTitles":["Email Masking"],"fullName":"Email Masking should return invalid emails as-is","status":"passed","title":"should return invalid emails as-is","duration":0.08639999999996917,"failureMessages":[],"meta":{}},{"ancestorTitles":["Email Masking"],"fullName":"Email Masking should handle emails with subdomains","status":"passed","title":"should handle emails with subdomains","duration":0.07720000000000482,"failureMessages":[],"meta":{}},{"ancestorTitles":["Phone Masking"],"fullName":"Phone Masking should mask formatted phone numbers","status":"passed","title":"should mask formatted phone numbers","duration":0.22910000000001673,"failureMessages":[],"meta":{}},{"ancestorTitles":["Phone Masking"],"fullName":"Phone Masking should mask international phone numbers","status":"passed","title":"should mask international phone numbers","duration":0.20529999999996562,"failureMessages":[],"meta":{}},{"ancestorTitles":["Phone Masking"],"fullName":"Phone Masking should mask unformatted phone numbers","status":"passed","title":"should mask unformatted phone numbers","duration":0.10419999999999163,"failureMessages":[],"meta":{}},{"ancestorTitles":["Phone Masking"],"fullName":"Phone Masking should handle null and undefined","status":"passed","title":"should handle null and undefined","duration":0.06400000000002137,"failureMessages":[],"meta":{}},{"ancestorTitles":["Phone Masking"],"fullName":"Phone Masking should handle empty string","status":"passed","title":"should handle empty string","duration":0.03370000000001028,"failureMessages":[],"meta":{}},{"ancestorTitles":["Phone Masking"],"fullName":"Phone Masking should return non-phone strings as-is","status":"passed","title":"should return non-phone strings as-is","duration":0.04779999999999518,"failureMessages":[],"meta":{}},{"ancestorTitles":["Phone Masking"],"fullName":"Phone Masking should handle phone with spaces","status":"passed","title":"should handle phone with spaces","duration":0.046899999999993724,"failureMessages":[],"meta":{}},{"ancestorTitles":["Generic PII Masking"],"fullName":"Generic PII Masking should detect and mask email addresses","status":"passed","title":"should detect and mask email addresses","duration":0.11320000000000618,"failureMessages":[],"meta":{}},{"ancestorTitles":["Generic PII Masking"],"fullName":"Generic PII Masking should detect and mask phone numbers","status":"passed","title":"should detect and mask phone numbers","duration":0.11630000000002383,"failureMessages":[],"meta":{}},{"ancestorTitles":["Generic PII Masking"],"fullName":"Generic PII Masking should mask other strings with default pattern","status":"passed","title":"should mask other strings with default pattern","duration":0.09229999999996608,"failureMessages":[],"meta":{}},{"ancestorTitles":["Generic PII Masking"],"fullName":"Generic PII Masking should handle null and undefined","status":"passed","title":"should handle null and undefined","duration":0.048499999999989996,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo User Detection"],"fullName":"Demo User Detection should detect DEMO role","status":"passed","title":"should detect DEMO role","duration":0.06470000000001619,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo User Detection"],"fullName":"Demo User Detection should detect demo organization match","status":"passed","title":"should detect demo organization match","duration":0.046699999999987085,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo User Detection"],"fullName":"Demo User Detection should return false for non-demo users","status":"passed","title":"should return false for non-demo users","duration":0.055900000000008276,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo User Detection"],"fullName":"Demo User Detection should return false when org does not match","status":"passed","title":"should return false when org does not match","duration":0.04259999999999309,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo User Detection"],"fullName":"Demo User Detection should handle null values","status":"passed","title":"should handle null values","duration":0.2547999999999888,"failureMessages":[],"meta":{}},{"ancestorTitles":["PII Fields Masking"],"fullName":"PII Fields Masking should mask email field in object","status":"passed","title":"should mask email field in object","duration":0.2954000000000292,"failureMessages":[],"meta":{}},{"ancestorTitles":["PII Fields Masking"],"fullName":"PII Fields Masking should not mask when isDemo is false","status":"passed","title":"should not mask when isDemo is false","duration":0.20289999999999964,"failureMessages":[],"meta":{}},{"ancestorTitles":["PII Fields Masking"],"fullName":"PII Fields Masking should handle custom field names","status":"passed","title":"should handle custom field names","duration":0.17000000000001592,"failureMessages":[],"meta":{}},{"ancestorTitles":["PII Fields Masking"],"fullName":"PII Fields Masking should handle missing fields gracefully","status":"passed","title":"should handle missing fields gracefully","duration":0.12520000000000664,"failureMessages":[],"meta":{}},{"ancestorTitles":["PII Fields Masking"],"fullName":"PII Fields Masking should handle null field values","status":"passed","title":"should handle null field values","duration":0.10130000000003747,"failureMessages":[],"meta":{}},{"ancestorTitles":["PII Array Masking"],"fullName":"PII Array Masking should mask all items in array","status":"passed","title":"should mask all items in array","duration":0.379099999999994,"failureMessages":[],"meta":{}},{"ancestorTitles":["PII Array Masking"],"fullName":"PII Array Masking should not mask when isDemo is false","status":"passed","title":"should not mask when isDemo is false","duration":0.2086999999999648,"failureMessages":[],"meta":{}},{"ancestorTitles":["PII Array Masking"],"fullName":"PII Array Masking should handle empty array","status":"passed","title":"should handle empty array","duration":1.1059000000000196,"failureMessages":[],"meta":{}},{"ancestorTitles":["Request Demo Detection"],"fullName":"Request Demo Detection should detect demo via user.isDemo flag","status":"passed","title":"should detect demo via user.isDemo flag","duration":0.35669999999998936,"failureMessages":[],"meta":{}},{"ancestorTitles":["Request Demo Detection"],"fullName":"Request Demo Detection should detect demo via currentOrg role","status":"passed","title":"should detect demo via currentOrg role","duration":0.1681000000000381,"failureMessages":[],"meta":{}},{"ancestorTitles":["Request Demo Detection"],"fullName":"Request Demo Detection should detect demo via demoOrgId","status":"passed","title":"should detect demo via demoOrgId","duration":0.11029999999999518,"failureMessages":[],"meta":{}},{"ancestorTitles":["Request Demo Detection"],"fullName":"Request Demo Detection should return false for regular users","status":"passed","title":"should return false for regular users","duration":0.09559999999999036,"failureMessages":[],"meta":{}},{"ancestorTitles":["Request Demo Detection"],"fullName":"Request Demo Detection should handle null session","status":"passed","title":"should handle null session","duration":0.09719999999998663,"failureMessages":[],"meta":{}},{"ancestorTitles":["Contact Data Masking"],"fullName":"Contact Data Masking should mask contact email and phone","status":"passed","title":"should mask contact email and phone","duration":0.26839999999998554,"failureMessages":[],"meta":{}},{"ancestorTitles":["Contact Data Masking"],"fullName":"Contact Data Masking should not mask when isDemo is false","status":"passed","title":"should not mask when isDemo is false","duration":0.2780999999999949,"failureMessages":[],"meta":{}},{"ancestorTitles":["Contact Data Masking"],"fullName":"Contact Data Masking should handle null email and phone","status":"passed","title":"should handle null email and phone","duration":0.25270000000000437,"failureMessages":[],"meta":{}},{"ancestorTitles":["Company Data Masking"],"fullName":"Company Data Masking should mask company email and phone","status":"passed","title":"should mask company email and phone","duration":0.276299999999992,"failureMessages":[],"meta":{}},{"ancestorTitles":["Company Data Masking"],"fullName":"Company Data Masking should not mask when isDemo is false","status":"passed","title":"should not mask when isDemo is false","duration":0.141900000000021,"failureMessages":[],"meta":{}},{"ancestorTitles":["Edge Cases"],"fullName":"Edge Cases should handle unicode characters in email","status":"passed","title":"should handle unicode characters in email","duration":0.13240000000001828,"failureMessages":[],"meta":{}},{"ancestorTitles":["Edge Cases"],"fullName":"Edge Cases should handle special characters in phone","status":"passed","title":"should handle special characters in phone","duration":0.12539999999995644,"failureMessages":[],"meta":{}},{"ancestorTitles":["Edge Cases"],"fullName":"Edge Cases should handle deeply nested objects","status":"passed","title":"should handle deeply nested objects","duration":0.11180000000001655,"failureMessages":[],"meta":{}},{"ancestorTitles":["Edge Cases"],"fullName":"Edge Cases should preserve object references when not masking","status":"passed","title":"should preserve object references when not masking","duration":0.09429999999997563,"failureMessages":[],"meta":{}},{"ancestorTitles":["Edge Cases"],"fullName":"Edge Cases should create new object when masking","status":"passed","title":"should create new object when masking","duration":0.49739999999997053,"failureMessages":[],"meta":{}},{"ancestorTitles":["Integration Scenarios"],"fullName":"Integration Scenarios should handle complete contact record","status":"passed","title":"should handle complete contact record","duration":0.27099999999995816,"failureMessages":[],"meta":{}},{"ancestorTitles":["Integration Scenarios"],"fullName":"Integration Scenarios should handle contact list with mixed data","status":"passed","title":"should handle contact list with mixed data","duration":0.3166999999999689,"failureMessages":[],"meta":{}},{"ancestorTitles":["Integration Scenarios"],"fullName":"Integration Scenarios should handle API response structure","status":"passed","title":"should handle API response structure","duration":0.33199999999999363,"failureMessages":[],"meta":{}}],"startTime":1760733132185,"endTime":1760733132196.332,"status":"passed","message":"","name":"D:/Dev/CRM/__tests__/mask-pii.test.ts"},{"assertionResults":[{"ancestorTitles":["Onboarding Checklist","calculateOnboardingState"],"fullName":"Onboarding Checklist calculateOnboardingState should calculate 0% progress when nothing is complete","status":"passed","title":"should calculate 0% progress when nothing is complete","duration":0.9559000000000424,"failureMessages":[],"meta":{}},{"ancestorTitles":["Onboarding Checklist","calculateOnboardingState"],"fullName":"Onboarding Checklist calculateOnboardingState should calculate 20% progress when 1 task is complete","status":"passed","title":"should calculate 20% progress when 1 task is complete","duration":0.1441000000000372,"failureMessages":[],"meta":{}},{"ancestorTitles":["Onboarding Checklist","calculateOnboardingState"],"fullName":"Onboarding Checklist calculateOnboardingState should calculate 60% progress when 3 tasks are complete","status":"passed","title":"should calculate 60% progress when 3 tasks are complete","duration":0.1379999999999768,"failureMessages":[],"meta":{}},{"ancestorTitles":["Onboarding Checklist","calculateOnboardingState"],"fullName":"Onboarding Checklist calculateOnboardingState should mark as completed when all tasks are done","status":"passed","title":"should mark as completed when all tasks are done","duration":0.13970000000000482,"failureMessages":[],"meta":{}},{"ancestorTitles":["Onboarding Checklist","calculateOnboardingState"],"fullName":"Onboarding Checklist calculateOnboardingState should handle null progress gracefully","status":"passed","title":"should handle null progress gracefully","duration":0.08800000000002228,"failureMessages":[],"meta":{}},{"ancestorTitles":["Onboarding Checklist","calculateOnboardingState"],"fullName":"Onboarding Checklist calculateOnboardingState should handle partial progress object","status":"passed","title":"should handle partial progress object","duration":0.117999999999995,"failureMessages":[],"meta":{}},{"ancestorTitles":["Onboarding Checklist","calculateOnboardingState"],"fullName":"Onboarding Checklist calculateOnboardingState should respect dismissed flag","status":"passed","title":"should respect dismissed flag","duration":0.06340000000000146,"failureMessages":[],"meta":{}},{"ancestorTitles":["Onboarding Checklist","calculateOnboardingState"],"fullName":"Onboarding Checklist calculateOnboardingState should handle edge case of completed but dismissed","status":"passed","title":"should handle edge case of completed but dismissed","duration":0.06970000000001164,"failureMessages":[],"meta":{}},{"ancestorTitles":["Onboarding Checklist","Task Definitions"],"fullName":"Onboarding Checklist Task Definitions should have 5 tasks defined","status":"passed","title":"should have 5 tasks defined","duration":0.5785999999999945,"failureMessages":[],"meta":{}},{"ancestorTitles":["Onboarding Checklist","Task Definitions"],"fullName":"Onboarding Checklist Task Definitions should have unique task IDs","status":"passed","title":"should have unique task IDs","duration":0.102800000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["Onboarding Checklist","Task Definitions"],"fullName":"Onboarding Checklist Task Definitions should have all required task properties","status":"passed","title":"should have all required task properties","duration":0.5875999999999522,"failureMessages":[],"meta":{}},{"ancestorTitles":["Onboarding Checklist","Task Definitions"],"fullName":"Onboarding Checklist Task Definitions should have correct task IDs in order","status":"passed","title":"should have correct task IDs in order","duration":0.4399999999999977,"failureMessages":[],"meta":{}},{"ancestorTitles":["Onboarding Checklist","Progress Tracking"],"fullName":"Onboarding Checklist Progress Tracking should track progress incrementally","status":"passed","title":"should track progress incrementally","duration":0.17360000000002174,"failureMessages":[],"meta":{}},{"ancestorTitles":["Onboarding Checklist","Progress Tracking"],"fullName":"Onboarding Checklist Progress Tracking should handle tasks completed in any order","status":"passed","title":"should handle tasks completed in any order","duration":0.07019999999999982,"failureMessages":[],"meta":{}}],"startTime":1760733131122,"endTime":1760733131126.0703,"status":"passed","message":"","name":"D:/Dev/CRM/__tests__/onboarding.test.ts"},{"assertionResults":[{"ancestorTitles":["PII Masking","maskEmail"],"fullName":"PII Masking maskEmail should mask email addresses","status":"passed","title":"should mask email addresses","duration":0.9780999999999835,"failureMessages":[],"meta":{}},{"ancestorTitles":["PII Masking","maskEmail"],"fullName":"PII Masking maskEmail should handle custom options","status":"passed","title":"should handle custom options","duration":0.15499999999997272,"failureMessages":[],"meta":{}},{"ancestorTitles":["PII Masking","maskEmail"],"fullName":"PII Masking maskEmail should handle empty/null/undefined","status":"passed","title":"should handle empty/null/undefined","duration":0.13450000000000273,"failureMessages":[],"meta":{}},{"ancestorTitles":["PII Masking","maskEmail"],"fullName":"PII Masking maskEmail should handle invalid emails","status":"passed","title":"should handle invalid emails","duration":0.0968000000000302,"failureMessages":[],"meta":{}},{"ancestorTitles":["PII Masking","maskPhone"],"fullName":"PII Masking maskPhone should mask phone numbers","status":"passed","title":"should mask phone numbers","duration":0.25670000000002346,"failureMessages":[],"meta":{}},{"ancestorTitles":["PII Masking","maskPhone"],"fullName":"PII Masking maskPhone should handle custom options","status":"passed","title":"should handle custom options","duration":0.13259999999996808,"failureMessages":[],"meta":{}},{"ancestorTitles":["PII Masking","maskPhone"],"fullName":"PII Masking maskPhone should handle empty/null/undefined","status":"passed","title":"should handle empty/null/undefined","duration":0.07519999999999527,"failureMessages":[],"meta":{}},{"ancestorTitles":["PII Masking","maskPhone"],"fullName":"PII Masking maskPhone should handle short numbers","status":"passed","title":"should handle short numbers","duration":0.04349999999999454,"failureMessages":[],"meta":{}},{"ancestorTitles":["PII Masking","maskPII"],"fullName":"PII Masking maskPII should mask specified fields","status":"passed","title":"should mask specified fields","duration":0.26370000000002847,"failureMessages":[],"meta":{}},{"ancestorTitles":["PII Masking","maskPII"],"fullName":"PII Masking maskPII should handle nested objects","status":"passed","title":"should handle nested objects","duration":0.09859999999997626,"failureMessages":[],"meta":{}},{"ancestorTitles":["PII Masking","maskPII"],"fullName":"PII Masking maskPII should handle missing fields","status":"passed","title":"should handle missing fields","duration":0.05459999999999354,"failureMessages":[],"meta":{}},{"ancestorTitles":["PII Masking","maskPII"],"fullName":"PII Masking maskPII should handle null values","status":"passed","title":"should handle null values","duration":0.11650000000003047,"failureMessages":[],"meta":{}},{"ancestorTitles":["PII Masking","maskPIIArray"],"fullName":"PII Masking maskPIIArray should mask array of objects","status":"passed","title":"should mask array of objects","duration":0.1833000000000311,"failureMessages":[],"meta":{}},{"ancestorTitles":["PII Masking","maskPIIArray"],"fullName":"PII Masking maskPIIArray should handle empty array","status":"passed","title":"should handle empty array","duration":0.3908999999999878,"failureMessages":[],"meta":{}},{"ancestorTitles":["PII Masking","isPotentialPII"],"fullName":"PII Masking isPotentialPII should detect email addresses","status":"passed","title":"should detect email addresses","duration":0.2939999999999827,"failureMessages":[],"meta":{}},{"ancestorTitles":["PII Masking","isPotentialPII"],"fullName":"PII Masking isPotentialPII should detect phone numbers","status":"passed","title":"should detect phone numbers","duration":0.1782000000000039,"failureMessages":[],"meta":{}},{"ancestorTitles":["PII Masking","isPotentialPII"],"fullName":"PII Masking isPotentialPII should detect SSN patterns","status":"passed","title":"should detect SSN patterns","duration":0.06090000000000373,"failureMessages":[],"meta":{}},{"ancestorTitles":["PII Masking","isPotentialPII"],"fullName":"PII Masking isPotentialPII should detect credit card patterns","status":"passed","title":"should detect credit card patterns","duration":0.08120000000002392,"failureMessages":[],"meta":{}},{"ancestorTitles":["PII Masking","isPotentialPII"],"fullName":"PII Masking isPotentialPII should handle non-string values","status":"passed","title":"should handle non-string values","duration":0.06729999999998881,"failureMessages":[],"meta":{}},{"ancestorTitles":["PII Masking","autoMaskPII"],"fullName":"PII Masking autoMaskPII should auto-detect and mask PII fields","status":"passed","title":"should auto-detect and mask PII fields","duration":0.16620000000000346,"failureMessages":[],"meta":{}},{"ancestorTitles":["PII Masking","autoMaskPII"],"fullName":"PII Masking autoMaskPII should mask common PII field names","status":"passed","title":"should mask common PII field names","duration":0.08539999999999281,"failureMessages":[],"meta":{}},{"ancestorTitles":["PII Masking","autoMaskPII"],"fullName":"PII Masking autoMaskPII should handle nested objects","status":"passed","title":"should handle nested objects","duration":0.1291999999999689,"failureMessages":[],"meta":{}},{"ancestorTitles":["PII Masking","autoMaskPII"],"fullName":"PII Masking autoMaskPII should handle arrays","status":"passed","title":"should handle arrays","duration":0.12019999999995434,"failureMessages":[],"meta":{}},{"ancestorTitles":["PII Masking","COMMON_PII_FIELDS"],"fullName":"PII Masking COMMON_PII_FIELDS should include common PII field names","status":"passed","title":"should include common PII field names","duration":0.6539999999999964,"failureMessages":[],"meta":{}}],"startTime":1760733131574,"endTime":1760733131579.654,"status":"passed","message":"","name":"D:/Dev/CRM/__tests__/pii-masking.test.ts"},{"assertionResults":[{"ancestorTitles":["Query Parameter Routing","ContactQueryHandler"],"fullName":"Query Parameter Routing ContactQueryHandler should dispatch contact:select event when open param is present","status":"passed","title":"should dispatch contact:select event when open param is present","duration":148.93100000000004,"failureMessages":[],"meta":{}},{"ancestorTitles":["Query Parameter Routing","ContactQueryHandler"],"fullName":"Query Parameter Routing ContactQueryHandler should not dispatch event when open param is missing","status":"passed","title":"should not dispatch event when open param is missing","duration":155.75520000000006,"failureMessages":[],"meta":{}},{"ancestorTitles":["Query Parameter Routing","ContactQueryHandler"],"fullName":"Query Parameter Routing ContactQueryHandler should handle null searchParams gracefully","status":"passed","title":"should handle null searchParams gracefully","duration":1.6471000000001368,"failureMessages":[],"meta":{}},{"ancestorTitles":["Query Parameter Routing","ContactQueryHandler"],"fullName":"Query Parameter Routing ContactQueryHandler should re-trigger on searchParams change","status":"passed","title":"should re-trigger on searchParams change","duration":281.3514,"failureMessages":[],"meta":{}},{"ancestorTitles":["Query Parameter Routing","DealsQueryHandler"],"fullName":"Query Parameter Routing DealsQueryHandler should call onPipelineChange when pipeline param is present","status":"passed","title":"should call onPipelineChange when pipeline param is present","duration":265.1152000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["Query Parameter Routing","DealsQueryHandler"],"fullName":"Query Parameter Routing DealsQueryHandler should call onDealFocus when focus param is present","status":"passed","title":"should call onDealFocus when focus param is present","duration":390.18780000000015,"failureMessages":[],"meta":{}},{"ancestorTitles":["Query Parameter Routing","DealsQueryHandler"],"fullName":"Query Parameter Routing DealsQueryHandler should handle both pipeline and focus params together","status":"passed","title":"should handle both pipeline and focus params together","duration":779.4420999999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["Query Parameter Routing","DealsQueryHandler"],"fullName":"Query Parameter Routing DealsQueryHandler should attempt to scroll deal card into view","status":"passed","title":"should attempt to scroll deal card into view","duration":401.6315000000004,"failureMessages":[],"meta":{}},{"ancestorTitles":["Query Parameter Routing","DealsQueryHandler"],"fullName":"Query Parameter Routing DealsQueryHandler should handle missing element gracefully","status":"passed","title":"should handle missing element gracefully","duration":404.61500000000024,"failureMessages":[],"meta":{}},{"ancestorTitles":["Query Parameter Routing","DealsQueryHandler"],"fullName":"Query Parameter Routing DealsQueryHandler should not call handlers when params are missing","status":"passed","title":"should not call handlers when params are missing","duration":813.0111999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["Query Parameter Routing","DealsQueryHandler"],"fullName":"Query Parameter Routing DealsQueryHandler should handle null searchParams gracefully","status":"passed","title":"should handle null searchParams gracefully","duration":0.8903000000000247,"failureMessages":[],"meta":{}},{"ancestorTitles":["Query Parameter Routing","URL formats"],"fullName":"Query Parameter Routing URL formats should document correct contact URL format","status":"passed","title":"should document correct contact URL format","duration":0.3293999999996231,"failureMessages":[],"meta":{}},{"ancestorTitles":["Query Parameter Routing","URL formats"],"fullName":"Query Parameter Routing URL formats should document correct deal URL format with focus only","status":"passed","title":"should document correct deal URL format with focus only","duration":0.15520000000014988,"failureMessages":[],"meta":{}},{"ancestorTitles":["Query Parameter Routing","URL formats"],"fullName":"Query Parameter Routing URL formats should document correct deal URL format with pipeline and focus","status":"passed","title":"should document correct deal URL format with pipeline and focus","duration":0.14220000000022992,"failureMessages":[],"meta":{}}],"startTime":1760733137313,"endTime":1760733140958.142,"status":"passed","message":"","name":"D:/Dev/CRM/__tests__/query-routing.test.tsx"},{"assertionResults":[{"ancestorTitles":["Combined Rate Limiting (IP + Org)","checkCombinedRateLimit"],"fullName":"Combined Rate Limiting (IP + Org) checkCombinedRateLimit should allow requests within both IP and org limits","status":"passed","title":"should allow requests within both IP and org limits","duration":1.5797999999999774,"failureMessages":[],"meta":{}},{"ancestorTitles":["Combined Rate Limiting (IP + Org)","checkCombinedRateLimit"],"fullName":"Combined Rate Limiting (IP + Org) checkCombinedRateLimit should block when IP exceeds burst limit","status":"passed","title":"should block when IP exceeds burst limit","duration":1.5429000000000315,"failureMessages":[],"meta":{}},{"ancestorTitles":["Combined Rate Limiting (IP + Org)","checkCombinedRateLimit"],"fullName":"Combined Rate Limiting (IP + Org) checkCombinedRateLimit should block when org exceeds normal limit","status":"passed","title":"should block when org exceeds normal limit","duration":0.42720000000002756,"failureMessages":[],"meta":{}},{"ancestorTitles":["Combined Rate Limiting (IP + Org)","checkCombinedRateLimit"],"fullName":"Combined Rate Limiting (IP + Org) checkCombinedRateLimit should use more restrictive limit between IP and org","status":"passed","title":"should use more restrictive limit between IP and org","duration":0.46539999999998827,"failureMessages":[],"meta":{}},{"ancestorTitles":["Combined Rate Limiting (IP + Org)","checkCombinedRateLimit"],"fullName":"Combined Rate Limiting (IP + Org) checkCombinedRateLimit should work without org ID (IP-only rate limiting)","status":"passed","title":"should work without org ID (IP-only rate limiting)","duration":0.2570999999999799,"failureMessages":[],"meta":{}},{"ancestorTitles":["Combined Rate Limiting (IP + Org)","WriteRateLimits configuration"],"fullName":"Combined Rate Limiting (IP + Org) WriteRateLimits configuration should have CONTACTS with burst support","status":"passed","title":"should have CONTACTS with burst support","duration":0.1926000000000272,"failureMessages":[],"meta":{}},{"ancestorTitles":["Combined Rate Limiting (IP + Org)","WriteRateLimits configuration"],"fullName":"Combined Rate Limiting (IP + Org) WriteRateLimits configuration should have DEALS with burst support","status":"passed","title":"should have DEALS with burst support","duration":0.08269999999998845,"failureMessages":[],"meta":{}},{"ancestorTitles":["Combined Rate Limiting (IP + Org)","WriteRateLimits configuration"],"fullName":"Combined Rate Limiting (IP + Org) WriteRateLimits configuration should have IMPORT with burst support","status":"passed","title":"should have IMPORT with burst support","duration":0.05880000000001928,"failureMessages":[],"meta":{}},{"ancestorTitles":["Combined Rate Limiting (IP + Org)","WriteRateLimits configuration"],"fullName":"Combined Rate Limiting (IP + Org) WriteRateLimits configuration should have EMAIL_LOG with burst support","status":"passed","title":"should have EMAIL_LOG with burst support","duration":0.15769999999997708,"failureMessages":[],"meta":{}},{"ancestorTitles":["Combined Rate Limiting (IP + Org)","withWriteRateLimit middleware"],"fullName":"Combined Rate Limiting (IP + Org) withWriteRateLimit middleware should allow requests within limit","status":"passed","title":"should allow requests within limit","duration":4.9664000000000215,"failureMessages":[],"meta":{}},{"ancestorTitles":["Combined Rate Limiting (IP + Org)","withWriteRateLimit middleware"],"fullName":"Combined Rate Limiting (IP + Org) withWriteRateLimit middleware should block requests exceeding burst limit","status":"passed","title":"should block requests exceeding burst limit","duration":2.1403000000000247,"failureMessages":[],"meta":{}},{"ancestorTitles":["Combined Rate Limiting (IP + Org)","withWriteRateLimit middleware"],"fullName":"Combined Rate Limiting (IP + Org) withWriteRateLimit middleware should return proper error response with retry info","status":"passed","title":"should return proper error response with retry info","duration":1.1388000000000034,"failureMessages":[],"meta":{}},{"ancestorTitles":["Combined Rate Limiting (IP + Org)","withWriteRateLimit middleware"],"fullName":"Combined Rate Limiting (IP + Org) withWriteRateLimit middleware should include rate limit scope in headers","status":"passed","title":"should include rate limit scope in headers","duration":0.9827000000000226,"failureMessages":[],"meta":{}},{"ancestorTitles":["Combined Rate Limiting (IP + Org)","Burst capacity behavior"],"fullName":"Combined Rate Limiting (IP + Org) Burst capacity behavior should allow burst up to burst limit, then enforce normal limit","status":"passed","title":"should allow burst up to burst limit, then enforce normal limit","duration":3.862799999999993,"failureMessages":[],"meta":{}}],"startTime":1760733112968,"endTime":1760733112985.8628,"status":"passed","message":"","name":"D:/Dev/CRM/__tests__/rate-limit-combined.test.ts"},{"assertionResults":[{"ancestorTitles":["Rate Limiter","checkRateLimit"],"fullName":"Rate Limiter checkRateLimit should allow first request","status":"passed","title":"should allow first request","duration":1.555499999999995,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiter","checkRateLimit"],"fullName":"Rate Limiter checkRateLimit should track multiple requests within limit","status":"passed","title":"should track multiple requests within limit","duration":0.5656000000000176,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiter","checkRateLimit"],"fullName":"Rate Limiter checkRateLimit should reject requests over limit","status":"passed","title":"should reject requests over limit","duration":0.6773999999999774,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiter","checkRateLimit"],"fullName":"Rate Limiter checkRateLimit should use different counters for different IPs","status":"passed","title":"should use different counters for different IPs","duration":0.32330000000001746,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiter","checkRateLimit"],"fullName":"Rate Limiter checkRateLimit should use different counters for different key prefixes","status":"passed","title":"should use different counters for different key prefixes","duration":0.35789999999997235,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiter","checkRateLimit"],"fullName":"Rate Limiter checkRateLimit should reset after window expires","status":"passed","title":"should reset after window expires","duration":157.24290000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiter","checkRateLimit"],"fullName":"Rate Limiter checkRateLimit should handle errors gracefully (fail open)","status":"passed","title":"should handle errors gracefully (fail open)","duration":5.072499999999991,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiter","checkRateLimit"],"fullName":"Rate Limiter checkRateLimit should return correct reset timestamp","status":"passed","title":"should return correct reset timestamp","duration":0.33989999999994325,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiter","resetRateLimit"],"fullName":"Rate Limiter resetRateLimit should reset rate limit for identifier","status":"passed","title":"should reset rate limit for identifier","duration":0.4800999999999931,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiter","getClientIp"],"fullName":"Rate Limiter getClientIp should extract IP from x-forwarded-for header","status":"passed","title":"should extract IP from x-forwarded-for header","duration":1.2390000000000327,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiter","getClientIp"],"fullName":"Rate Limiter getClientIp should extract IP from cf-connecting-ip header (Cloudflare)","status":"passed","title":"should extract IP from cf-connecting-ip header (Cloudflare)","duration":0.24569999999994252,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiter","getClientIp"],"fullName":"Rate Limiter getClientIp should extract IP from x-real-ip header","status":"passed","title":"should extract IP from x-real-ip header","duration":0.23649999999997817,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiter","getClientIp"],"fullName":"Rate Limiter getClientIp should extract IP from x-vercel-forwarded-for header","status":"passed","title":"should extract IP from x-vercel-forwarded-for header","duration":0.1912000000000944,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiter","getClientIp"],"fullName":"Rate Limiter getClientIp should prioritize x-forwarded-for over other headers","status":"passed","title":"should prioritize x-forwarded-for over other headers","duration":0.23820000000000618,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiter","getClientIp"],"fullName":"Rate Limiter getClientIp should return \"unknown\" when no IP headers present","status":"passed","title":"should return \"unknown\" when no IP headers present","duration":0.16019999999991796,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiter","getClientIp"],"fullName":"Rate Limiter getClientIp should trim whitespace from x-forwarded-for IPs","status":"passed","title":"should trim whitespace from x-forwarded-for IPs","duration":0.20690000000001874,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiter","DemoRateLimits configuration"],"fullName":"Rate Limiter DemoRateLimits configuration should have AUTH configuration","status":"passed","title":"should have AUTH configuration","duration":0.15399999999999636,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiter","DemoRateLimits configuration"],"fullName":"Rate Limiter DemoRateLimits configuration should have API configuration","status":"passed","title":"should have API configuration","duration":0.1352000000000544,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiter","DemoRateLimits configuration"],"fullName":"Rate Limiter DemoRateLimits configuration should have EXPORT configuration with stricter limits","status":"passed","title":"should have EXPORT configuration with stricter limits","duration":0.10410000000001673,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiter","Sliding window behavior"],"fullName":"Rate Limiter Sliding window behavior should maintain accurate count across multiple requests","status":"passed","title":"should maintain accurate count across multiple requests","duration":1.5236999999999625,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiter","Sliding window behavior"],"fullName":"Rate Limiter Sliding window behavior should provide accurate remaining count","status":"passed","title":"should provide accurate remaining count","duration":0.5798999999999523,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiter","WriteRateLimits configuration"],"fullName":"Rate Limiter WriteRateLimits configuration should have CONTACTS configuration","status":"passed","title":"should have CONTACTS configuration","duration":0.3523000000000138,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiter","WriteRateLimits configuration"],"fullName":"Rate Limiter WriteRateLimits configuration should have DEALS configuration","status":"passed","title":"should have DEALS configuration","duration":0.4114000000000715,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiter","WriteRateLimits configuration"],"fullName":"Rate Limiter WriteRateLimits configuration should have IMPORT configuration with stricter limits","status":"passed","title":"should have IMPORT configuration with stricter limits","duration":0.5597999999999956,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiter","WriteRateLimits configuration"],"fullName":"Rate Limiter WriteRateLimits configuration should have EMAIL_LOG configuration","status":"passed","title":"should have EMAIL_LOG configuration","duration":0.6212000000000444,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiter","withWriteRateLimit middleware"],"fullName":"Rate Limiter withWriteRateLimit middleware should allow requests within limit","status":"passed","title":"should allow requests within limit","duration":4.99389999999994,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiter","withWriteRateLimit middleware"],"fullName":"Rate Limiter withWriteRateLimit middleware should block requests exceeding limit","status":"passed","title":"should block requests exceeding limit","duration":2.323600000000056,"failureMessages":[],"meta":{}},{"ancestorTitles":["Rate Limiter","withWriteRateLimit middleware"],"fullName":"Rate Limiter withWriteRateLimit middleware should not call handler when rate limited","status":"passed","title":"should not call handler when rate limited","duration":1.1322999999999865,"failureMessages":[],"meta":{}}],"startTime":1760733128243,"endTime":1760733128426.1323,"status":"passed","message":"","name":"D:/Dev/CRM/__tests__/rate-limit.test.ts"},{"assertionResults":[{"ancestorTitles":["Security Headers","Strict-Transport-Security (HSTS)"],"fullName":"Security Headers Strict-Transport-Security (HSTS) should have correct HSTS header value","status":"passed","title":"should have correct HSTS header value","duration":0.9582000000000335,"failureMessages":[],"meta":{}},{"ancestorTitles":["Security Headers","Strict-Transport-Security (HSTS)"],"fullName":"Security Headers Strict-Transport-Security (HSTS) should enforce HTTPS for one year (31536000 seconds)","status":"passed","title":"should enforce HTTPS for one year (31536000 seconds)","duration":0.155399999999986,"failureMessages":[],"meta":{}},{"ancestorTitles":["Security Headers","Strict-Transport-Security (HSTS)"],"fullName":"Security Headers Strict-Transport-Security (HSTS) should include subdomains in HSTS policy","status":"passed","title":"should include subdomains in HSTS policy","duration":0.09550000000001546,"failureMessages":[],"meta":{}},{"ancestorTitles":["Security Headers","Strict-Transport-Security (HSTS)"],"fullName":"Security Headers Strict-Transport-Security (HSTS) should allow preload list submission","status":"passed","title":"should allow preload list submission","duration":0.0736999999999739,"failureMessages":[],"meta":{}},{"ancestorTitles":["Security Headers","X-Content-Type-Options"],"fullName":"Security Headers X-Content-Type-Options should prevent MIME type sniffing","status":"passed","title":"should prevent MIME type sniffing","duration":0.06610000000000582,"failureMessages":[],"meta":{}},{"ancestorTitles":["Security Headers","X-Content-Type-Options"],"fullName":"Security Headers X-Content-Type-Options should not allow alternative values","status":"passed","title":"should not allow alternative values","duration":0.4672999999999661,"failureMessages":[],"meta":{}},{"ancestorTitles":["Security Headers","X-Frame-Options"],"fullName":"Security Headers X-Frame-Options should deny all framing","status":"passed","title":"should deny all framing","duration":0.11250000000001137,"failureMessages":[],"meta":{}},{"ancestorTitles":["Security Headers","X-Frame-Options"],"fullName":"Security Headers X-Frame-Options should not use SAMEORIGIN (prefer DENY for security)","status":"passed","title":"should not use SAMEORIGIN (prefer DENY for security)","duration":0.07070000000004484,"failureMessages":[],"meta":{}},{"ancestorTitles":["Security Headers","X-Frame-Options"],"fullName":"Security Headers X-Frame-Options should not use ALLOW-FROM (deprecated)","status":"passed","title":"should not use ALLOW-FROM (deprecated)","duration":0.157100000000014,"failureMessages":[],"meta":{}},{"ancestorTitles":["Security Headers","Referrer-Policy"],"fullName":"Security Headers Referrer-Policy should use strict-origin-when-cross-origin","status":"passed","title":"should use strict-origin-when-cross-origin","duration":0.07339999999999236,"failureMessages":[],"meta":{}},{"ancestorTitles":["Security Headers","Referrer-Policy"],"fullName":"Security Headers Referrer-Policy should send full URL on same-origin requests","status":"passed","title":"should send full URL on same-origin requests","duration":0.046499999999980446,"failureMessages":[],"meta":{}},{"ancestorTitles":["Security Headers","Referrer-Policy"],"fullName":"Security Headers Referrer-Policy should send only origin on cross-origin HTTPS requests","status":"passed","title":"should send only origin on cross-origin HTTPS requests","duration":0.10070000000001755,"failureMessages":[],"meta":{}},{"ancestorTitles":["Security Headers","Permissions-Policy"],"fullName":"Security Headers Permissions-Policy should disable camera access","status":"passed","title":"should disable camera access","duration":0.04279999999999973,"failureMessages":[],"meta":{}},{"ancestorTitles":["Security Headers","Permissions-Policy"],"fullName":"Security Headers Permissions-Policy should disable microphone access","status":"passed","title":"should disable microphone access","duration":0.030599999999992633,"failureMessages":[],"meta":{}},{"ancestorTitles":["Security Headers","Permissions-Policy"],"fullName":"Security Headers Permissions-Policy should disable geolocation access","status":"passed","title":"should disable geolocation access","duration":0.028900000000021464,"failureMessages":[],"meta":{}},{"ancestorTitles":["Security Headers","Permissions-Policy"],"fullName":"Security Headers Permissions-Policy should disable FLoC/interest-cohort","status":"passed","title":"should disable FLoC/interest-cohort","duration":0.028200000000026648,"failureMessages":[],"meta":{}},{"ancestorTitles":["Security Headers","Permissions-Policy"],"fullName":"Security Headers Permissions-Policy should use minimal permission set","status":"passed","title":"should use minimal permission set","duration":0.06420000000002801,"failureMessages":[],"meta":{}},{"ancestorTitles":["Security Headers","Permissions-Policy"],"fullName":"Security Headers Permissions-Policy should deny all origins for specified permissions","status":"passed","title":"should deny all origins for specified permissions","duration":0.04279999999999973,"failureMessages":[],"meta":{}},{"ancestorTitles":["Security Headers","Security Headers Integration"],"fullName":"Security Headers Security Headers Integration should have all required security headers","status":"passed","title":"should have all required security headers","duration":0.19130000000001246,"failureMessages":[],"meta":{}},{"ancestorTitles":["Security Headers","Security Headers Integration"],"fullName":"Security Headers Security Headers Integration should provide defense in depth","status":"passed","title":"should provide defense in depth","duration":0.06799999999998363,"failureMessages":[],"meta":{}},{"ancestorTitles":["Security Headers","Security Headers Integration"],"fullName":"Security Headers Security Headers Integration should follow security best practices","status":"passed","title":"should follow security best practices","duration":0.10149999999998727,"failureMessages":[],"meta":{}},{"ancestorTitles":["Security Headers","Header Values Validation"],"fullName":"Security Headers Header Values Validation should not contain typos in header names","status":"passed","title":"should not contain typos in header names","duration":0.3062999999999647,"failureMessages":[],"meta":{}},{"ancestorTitles":["Security Headers","Header Values Validation"],"fullName":"Security Headers Header Values Validation should use correct casing for header names","status":"passed","title":"should use correct casing for header names","duration":0.24639999999999418,"failureMessages":[],"meta":{}},{"ancestorTitles":["Security Headers","OWASP Security Headers Compliance"],"fullName":"Security Headers OWASP Security Headers Compliance should implement OWASP recommended headers","status":"passed","title":"should implement OWASP recommended headers","duration":0.23910000000000764,"failureMessages":[],"meta":{}},{"ancestorTitles":["Security Headers","OWASP Security Headers Compliance"],"fullName":"Security Headers OWASP Security Headers Compliance should protect against common attacks","status":"passed","title":"should protect against common attacks","duration":0.049000000000035016,"failureMessages":[],"meta":{}},{"ancestorTitles":["Security Headers","Production Readiness"],"fullName":"Security Headers Production Readiness should have production-grade HSTS configuration","status":"passed","title":"should have production-grade HSTS configuration","duration":0.09789999999998145,"failureMessages":[],"meta":{}},{"ancestorTitles":["Security Headers","Production Readiness"],"fullName":"Security Headers Production Readiness should not have development-only relaxed policies","status":"passed","title":"should not have development-only relaxed policies","duration":0.10969999999997526,"failureMessages":[],"meta":{}},{"ancestorTitles":["Security Headers","Production Readiness"],"fullName":"Security Headers Production Readiness should apply headers to all responses","status":"passed","title":"should apply headers to all responses","duration":0.20420000000001437,"failureMessages":[],"meta":{}}],"startTime":1760733132610,"endTime":1760733132615.204,"status":"passed","message":"","name":"D:/Dev/CRM/__tests__/security-headers.test.ts"},{"assertionResults":[{"ancestorTitles":["Transform Contact"],"fullName":"Transform Contact should mask contact for demo session","status":"passed","title":"should mask contact for demo session","duration":1.4834999999999923,"failureMessages":[],"meta":{}},{"ancestorTitles":["Transform Contact"],"fullName":"Transform Contact should not mask contact for regular session","status":"passed","title":"should not mask contact for regular session","duration":0.1915000000000191,"failureMessages":[],"meta":{}},{"ancestorTitles":["Transform Contact"],"fullName":"Transform Contact should not mask for null session","status":"passed","title":"should not mask for null session","duration":0.08610000000004447,"failureMessages":[],"meta":{}},{"ancestorTitles":["Transform Contacts Array"],"fullName":"Transform Contacts Array should mask all contacts for demo session","status":"passed","title":"should mask all contacts for demo session","duration":0.24099999999998545,"failureMessages":[],"meta":{}},{"ancestorTitles":["Transform Contacts Array"],"fullName":"Transform Contacts Array should not mask for regular session","status":"passed","title":"should not mask for regular session","duration":0.0886000000000422,"failureMessages":[],"meta":{}},{"ancestorTitles":["Transform Company"],"fullName":"Transform Company should mask company for demo session","status":"passed","title":"should mask company for demo session","duration":0.15579999999999927,"failureMessages":[],"meta":{}},{"ancestorTitles":["Transform Company"],"fullName":"Transform Company should not mask company for regular session","status":"passed","title":"should not mask company for regular session","duration":0.06340000000000146,"failureMessages":[],"meta":{}},{"ancestorTitles":["Transform Companies Array"],"fullName":"Transform Companies Array should mask all companies for demo session","status":"passed","title":"should mask all companies for demo session","duration":0.120900000000006,"failureMessages":[],"meta":{}},{"ancestorTitles":["Transform Activity"],"fullName":"Transform Activity should mask activity with contact info","status":"passed","title":"should mask activity with contact info","duration":0.23630000000002838,"failureMessages":[],"meta":{}},{"ancestorTitles":["Transform Activity"],"fullName":"Transform Activity should handle activity without PII","status":"passed","title":"should handle activity without PII","duration":0.09719999999998663,"failureMessages":[],"meta":{}},{"ancestorTitles":["Transform Activities Array"],"fullName":"Transform Activities Array should mask all activities for demo session","status":"passed","title":"should mask all activities for demo session","duration":0.1844000000000392,"failureMessages":[],"meta":{}},{"ancestorTitles":["Transform Deal"],"fullName":"Transform Deal should mask nested contact and company","status":"passed","title":"should mask nested contact and company","duration":0.15390000000002146,"failureMessages":[],"meta":{}},{"ancestorTitles":["Transform Deal"],"fullName":"Transform Deal should handle deal without nested data","status":"passed","title":"should handle deal without nested data","duration":0.05900000000002592,"failureMessages":[],"meta":{}},{"ancestorTitles":["Transform Deal"],"fullName":"Transform Deal should not mask for regular session","status":"passed","title":"should not mask for regular session","duration":0.04250000000001819,"failureMessages":[],"meta":{}},{"ancestorTitles":["Transform Deals Array"],"fullName":"Transform Deals Array should mask all deals with nested data","status":"passed","title":"should mask all deals with nested data","duration":0.1016999999999939,"failureMessages":[],"meta":{}},{"ancestorTitles":["Transform Data (Generic)"],"fullName":"Transform Data (Generic) should handle arrays","status":"passed","title":"should handle arrays","duration":0.09969999999998436,"failureMessages":[],"meta":{}},{"ancestorTitles":["Transform Data (Generic)"],"fullName":"Transform Data (Generic) should handle objects","status":"passed","title":"should handle objects","duration":0.11920000000003483,"failureMessages":[],"meta":{}},{"ancestorTitles":["Transform Data (Generic)"],"fullName":"Transform Data (Generic) should handle primitives","status":"passed","title":"should handle primitives","duration":0.08929999999998017,"failureMessages":[],"meta":{}},{"ancestorTitles":["Transform Data (Generic)"],"fullName":"Transform Data (Generic) should handle nested arrays","status":"passed","title":"should handle nested arrays","duration":0.11050000000000182,"failureMessages":[],"meta":{}},{"ancestorTitles":["Transform Response"],"fullName":"Transform Response should transform array response","status":"passed","title":"should transform array response","duration":0.09390000000001919,"failureMessages":[],"meta":{}},{"ancestorTitles":["Transform Response"],"fullName":"Transform Response should transform object response","status":"passed","title":"should transform object response","duration":0.050499999999999545,"failureMessages":[],"meta":{}},{"ancestorTitles":["Transform Response"],"fullName":"Transform Response should handle custom fields","status":"passed","title":"should handle custom fields","duration":0.05629999999996471,"failureMessages":[],"meta":{}},{"ancestorTitles":["Transform Response"],"fullName":"Transform Response should not transform for regular session","status":"passed","title":"should not transform for regular session","duration":0.0362999999999829,"failureMessages":[],"meta":{}},{"ancestorTitles":["Get Masking Status"],"fullName":"Get Masking Status should detect demo via isDemo flag","status":"passed","title":"should detect demo via isDemo flag","duration":0.065400000000011,"failureMessages":[],"meta":{}},{"ancestorTitles":["Get Masking Status"],"fullName":"Get Masking Status should detect demo via currentOrg role","status":"passed","title":"should detect demo via currentOrg role","duration":0.04279999999999973,"failureMessages":[],"meta":{}},{"ancestorTitles":["Get Masking Status"],"fullName":"Get Masking Status should detect demo via demoOrgId","status":"passed","title":"should detect demo via demoOrgId","duration":0.055900000000008276,"failureMessages":[],"meta":{}},{"ancestorTitles":["Get Masking Status"],"fullName":"Get Masking Status should return false for regular user","status":"passed","title":"should return false for regular user","duration":0.04199999999997317,"failureMessages":[],"meta":{}},{"ancestorTitles":["Get Masking Status"],"fullName":"Get Masking Status should handle null session","status":"passed","title":"should handle null session","duration":0.03950000000003229,"failureMessages":[],"meta":{}},{"ancestorTitles":["Integration Scenarios"],"fullName":"Integration Scenarios should handle complete API response with nested data","status":"passed","title":"should handle complete API response with nested data","duration":0.08019999999999072,"failureMessages":[],"meta":{}},{"ancestorTitles":["Integration Scenarios"],"fullName":"Integration Scenarios should preserve non-PII data in mixed responses","status":"passed","title":"should preserve non-PII data in mixed responses","duration":0.11240000000003647,"failureMessages":[],"meta":{}}],"startTime":1760733132585,"endTime":1760733132590.1123,"status":"passed","message":"","name":"D:/Dev/CRM/__tests__/transform-pii.test.ts"},{"assertionResults":[{"ancestorTitles":["Database Reset - Smoke Test"],"fullName":"Database Reset - Smoke Test reset clears rows","status":"passed","title":"reset clears rows","duration":1328.2175000000002,"failureMessages":[],"meta":{}}],"startTime":1760733112948,"endTime":1760733114276.2175,"status":"passed","message":"","name":"D:/Dev/CRM/tests/db-reset.smoke.test.ts"},{"assertionResults":[{"ancestorTitles":["Contacts Server Actions","getContacts"],"fullName":"Contacts Server Actions getContacts should return contacts with proper pagination","status":"passed","title":"should return contacts with proper pagination","duration":4.628600000000006,"failureMessages":[],"meta":{}},{"ancestorTitles":["Contacts Server Actions","getContacts"],"fullName":"Contacts Server Actions getContacts should handle search queries","status":"passed","title":"should handle search queries","duration":1.5084999999999695,"failureMessages":[],"meta":{}},{"ancestorTitles":["Contacts Server Actions","createContact"],"fullName":"Contacts Server Actions createContact should create a contact successfully","status":"passed","title":"should create a contact successfully","duration":1.1482000000000312,"failureMessages":[],"meta":{}},{"ancestorTitles":["Contacts Server Actions","updateContact"],"fullName":"Contacts Server Actions updateContact should update a contact successfully","status":"passed","title":"should update a contact successfully","duration":0.656599999999969,"failureMessages":[],"meta":{}}],"startTime":1760733131638,"endTime":1760733131645.6565,"status":"passed","message":"","name":"D:/Dev/CRM/src/server/contacts.test.ts"},{"assertionResults":[{"ancestorTitles":["Deals Server Actions","getDeals"],"fullName":"Deals Server Actions getDeals should return deals with proper pagination and filtering","status":"passed","title":"should return deals with proper pagination and filtering","duration":3.7736000000000445,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deals Server Actions","getDeals"],"fullName":"Deals Server Actions getDeals should handle search queries","status":"passed","title":"should handle search queries","duration":0.8240999999999872,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deals Server Actions","getPipelines"],"fullName":"Deals Server Actions getPipelines should return pipelines with stages and deal counts","status":"passed","title":"should return pipelines with stages and deal counts","duration":0.36240000000003647,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deals Server Actions","moveDealToStage"],"fullName":"Deals Server Actions moveDealToStage should successfully move a deal to a different stage","status":"passed","title":"should successfully move a deal to a different stage","duration":0.6467000000000098,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deals Server Actions","moveDealToStage"],"fullName":"Deals Server Actions moveDealToStage should throw error if deal not found","status":"passed","title":"should throw error if deal not found","duration":0.8851999999999975,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deals Server Actions","moveDealToStage"],"fullName":"Deals Server Actions moveDealToStage should throw error if stage not found or belongs to different pipeline","status":"passed","title":"should throw error if stage not found or belongs to different pipeline","duration":0.24610000000001264,"failureMessages":[],"meta":{}}],"startTime":1760733130727,"endTime":1760733130734.246,"status":"passed","message":"","name":"D:/Dev/CRM/src/server/deals.test.ts"},{"assertionResults":[{"ancestorTitles":["auth-email"],"fullName":"auth-email forces URL origin to NEXTAUTH_URL and sends email","status":"passed","title":"forces URL origin to NEXTAUTH_URL and sends email","duration":1.490700000000004,"failureMessages":[],"meta":{}},{"ancestorTitles":["auth-email"],"fullName":"auth-email throws when provider returns error","status":"passed","title":"throws when provider returns error","duration":1.0324999999999704,"failureMessages":[],"meta":{}}],"startTime":1760733133663,"endTime":1760733133665.0325,"status":"passed","message":"","name":"D:/Dev/CRM/src/__tests__/auth-email.test.ts"},{"assertionResults":[{"ancestorTitles":["Auth Smoke Tests"],"fullName":"Auth Smoke Tests getBaseUrl returns a valid URL","status":"passed","title":"getBaseUrl returns a valid URL","duration":0.7210000000000036,"failureMessages":[],"meta":{}},{"ancestorTitles":["Auth Smoke Tests"],"fullName":"Auth Smoke Tests getBaseUrl matches NEXTAUTH_URL in production","status":"passed","title":"getBaseUrl matches NEXTAUTH_URL in production","duration":0.134900000000016,"failureMessages":[],"meta":{}},{"ancestorTitles":["Auth Smoke Tests"],"fullName":"Auth Smoke Tests callback URL should match baseUrl pattern","status":"passed","title":"callback URL should match baseUrl pattern","duration":0.176400000000001,"failureMessages":[],"meta":{}}],"startTime":1760733134589,"endTime":1760733134590.1765,"status":"passed","message":"","name":"D:/Dev/CRM/src/__tests__/auth.test.ts"},{"assertionResults":[{"ancestorTitles":["Contacts Performance"],"fullName":"Contacts Performance should list contacts quickly","status":"passed","title":"should list contacts quickly","duration":1.6590999999999667,"failureMessages":[],"meta":{}}],"startTime":1760733134435,"endTime":1760733134436.6592,"status":"passed","message":"","name":"D:/Dev/CRM/src/__tests__/contacts-performance.test.ts"},{"assertionResults":[{"ancestorTitles":["Deals Board"],"fullName":"Deals Board shows columns with Create first deal CTA when no pipeline selected","status":"passed","title":"shows columns with Create first deal CTA when no pipeline selected","duration":67.79840000000013,"failureMessages":[],"meta":{}}],"startTime":1760733143080,"endTime":1760733143147.7983,"status":"passed","message":"","name":"D:/Dev/CRM/src/__tests__/deals-board.test.tsx"},{"assertionResults":[{"ancestorTitles":["/api/dev/test-email"],"fullName":"/api/dev/test-email returns 400 when missing email","status":"passed","title":"returns 400 when missing email","duration":3.499500000000012,"failureMessages":[],"meta":{}},{"ancestorTitles":["/api/dev/test-email"],"fullName":"/api/dev/test-email returns 200 on success","status":"passed","title":"returns 200 on success","duration":0.8041000000000054,"failureMessages":[],"meta":{}},{"ancestorTitles":["/api/dev/test-email"],"fullName":"/api/dev/test-email returns 500 on send error","status":"passed","title":"returns 500 on send error","duration":117.83069999999998,"failureMessages":[],"meta":{}}],"startTime":1760733128834,"endTime":1760733128955.8308,"status":"passed","message":"","name":"D:/Dev/CRM/src/__tests__/dev-test-email-route.test.ts"},{"assertionResults":[{"ancestorTitles":["maskPII"],"fullName":"maskPII should mask email addresses","status":"passed","title":"should mask email addresses","duration":0.8883999999999901,"failureMessages":[],"meta":{}},{"ancestorTitles":["maskPII"],"fullName":"maskPII should mask phone numbers","status":"passed","title":"should mask phone numbers","duration":0.3392000000000053,"failureMessages":[],"meta":{}},{"ancestorTitles":["maskPII"],"fullName":"maskPII should mask other strings","status":"passed","title":"should mask other strings","duration":0.15850000000000364,"failureMessages":[],"meta":{}},{"ancestorTitles":["maskPII"],"fullName":"maskPII should handle null and undefined","status":"passed","title":"should handle null and undefined","duration":0.09539999999998372,"failureMessages":[],"meta":{}},{"ancestorTitles":["maskPII"],"fullName":"maskPII should handle edge cases","status":"passed","title":"should handle edge cases","duration":0.08499999999997954,"failureMessages":[],"meta":{}}],"startTime":1760733134153,"endTime":1760733134155.0955,"status":"passed","message":"","name":"D:/Dev/CRM/src/__tests__/mask-pii.test.ts"},{"assertionResults":[{"ancestorTitles":["RateLimiter"],"fullName":"RateLimiter should allow requests within limits","status":"passed","title":"should allow requests within limits","duration":1.8190999999999917,"failureMessages":[],"meta":{}},{"ancestorTitles":["RateLimiter"],"fullName":"RateLimiter should allow writes within limits","status":"passed","title":"should allow writes within limits","duration":0.24459999999999127,"failureMessages":[],"meta":{}},{"ancestorTitles":["RateLimiter"],"fullName":"RateLimiter should track reads and writes separately","status":"passed","title":"should track reads and writes separately","duration":0.13259999999996808,"failureMessages":[],"meta":{}},{"ancestorTitles":["RateLimiter"],"fullName":"RateLimiter should clean up old entries","status":"passed","title":"should clean up old entries","duration":1.290200000000027,"failureMessages":[],"meta":{}},{"ancestorTitles":["RateLimiter"],"fullName":"RateLimiter should handle different IPs separately","status":"passed","title":"should handle different IPs separately","duration":0.17959999999999354,"failureMessages":[],"meta":{}},{"ancestorTitles":["checkDemoRateLimit"],"fullName":"checkDemoRateLimit should return null for allowed requests","status":"passed","title":"should return null for allowed requests","duration":0.32480000000003884,"failureMessages":[],"meta":{}},{"ancestorTitles":["checkDemoRateLimit"],"fullName":"checkDemoRateLimit should return 429 response when rate limited","status":"passed","title":"should return 429 response when rate limited","duration":3.225900000000024,"failureMessages":[],"meta":{}},{"ancestorTitles":["checkDemoRateLimit"],"fullName":"checkDemoRateLimit should return 429 response when write limit exceeded","status":"passed","title":"should return 429 response when write limit exceeded","duration":0.4730000000000132,"failureMessages":[],"meta":{}},{"ancestorTitles":["checkDemoRateLimit"],"fullName":"checkDemoRateLimit should include proper headers in rate limit response","status":"passed","title":"should include proper headers in rate limit response","duration":0.4549000000000092,"failureMessages":[],"meta":{}},{"ancestorTitles":["checkDemoRateLimit"],"fullName":"checkDemoRateLimit should handle different IP headers","status":"passed","title":"should handle different IP headers","duration":0.22350000000000136,"failureMessages":[],"meta":{}}],"startTime":1760733130119,"endTime":1760733130128.2234,"status":"passed","message":"","name":"D:/Dev/CRM/src/__tests__/rate-limit.test.ts"},{"assertionResults":[{"ancestorTitles":["Demo User Write Protection","Contact Import Routes"],"fullName":"Demo User Write Protection Contact Import Routes should block demo user from importing contacts","status":"passed","title":"should block demo user from importing contacts","duration":5.626100000000065,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo User Write Protection","Contact Import Routes"],"fullName":"Demo User Write Protection Contact Import Routes should allow regular user to import contacts","status":"passed","title":"should allow regular user to import contacts","duration":1.257600000000025,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo User Write Protection","Contact Import Routes"],"fullName":"Demo User Write Protection Contact Import Routes should block demo user from rolling back imports","status":"passed","title":"should block demo user from rolling back imports","duration":0.6460999999999331,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo User Write Protection","Email Logging Routes"],"fullName":"Demo User Write Protection Email Logging Routes should block demo user from logging emails","status":"passed","title":"should block demo user from logging emails","duration":3.776200000000017,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo User Write Protection","Email Logging Routes"],"fullName":"Demo User Write Protection Email Logging Routes should allow regular user to log emails","status":"passed","title":"should allow regular user to log emails","duration":1.2919000000000551,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo User Write Protection","Offline Sync Routes"],"fullName":"Demo User Write Protection Offline Sync Routes should block demo user from sync operations","status":"passed","title":"should block demo user from sync operations","duration":0.7019000000000233,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo User Write Protection","Offline Sync Routes"],"fullName":"Demo User Write Protection Offline Sync Routes should allow regular user to sync","status":"passed","title":"should allow regular user to sync","duration":0.543700000000058,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo User Write Protection","CSV Import Routes"],"fullName":"Demo User Write Protection CSV Import Routes should block demo user from CSV imports","status":"passed","title":"should block demo user from CSV imports","duration":1.5932000000000244,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo User Write Protection","CSV Import Routes"],"fullName":"Demo User Write Protection CSV Import Routes should allow regular user to import CSV","status":"passed","title":"should allow regular user to import CSV","duration":5.322400000000016,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo User Write Protection","CSV Template Routes"],"fullName":"Demo User Write Protection CSV Template Routes should block demo user from creating templates","status":"passed","title":"should block demo user from creating templates","duration":0.6557999999999993,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo User Write Protection","CSV Template Routes"],"fullName":"Demo User Write Protection CSV Template Routes should block demo user from updating templates","status":"passed","title":"should block demo user from updating templates","duration":0.4008000000000038,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo User Write Protection","CSV Template Routes"],"fullName":"Demo User Write Protection CSV Template Routes should block demo user from deleting templates","status":"passed","title":"should block demo user from deleting templates","duration":0.6865999999999985,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo User Write Protection","Workspace Routes"],"fullName":"Demo User Write Protection Workspace Routes should block demo user from updating workspace","status":"passed","title":"should block demo user from updating workspace","duration":0.4393000000000029,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo User Write Protection","Workspace Routes"],"fullName":"Demo User Write Protection Workspace Routes should allow regular user to update workspace","status":"passed","title":"should allow regular user to update workspace","duration":0.22769999999991342,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo User Write Protection","Upload Routes"],"fullName":"Demo User Write Protection Upload Routes should block demo user from uploading files","status":"passed","title":"should block demo user from uploading files","duration":0.4799000000000433,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo User Write Protection","Upload Routes"],"fullName":"Demo User Write Protection Upload Routes should allow regular user to upload files","status":"passed","title":"should allow regular user to upload files","duration":1.9255000000000564,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo User Write Protection","Session State Validation"],"fullName":"Demo User Write Protection Session State Validation should detect demo user with isDemo=true","status":"failed","title":"should detect demo user with isDemo=true","duration":9.610900000000015,"failureMessages":["AssertionError: expected 415 to be 403 // Object.is equality\n    at D:\\Dev\\CRM\\__tests__\\api\\demo-protection.test.ts:325:31\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///D:/Dev/CRM/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}},{"ancestorTitles":["Demo User Write Protection","Session State Validation"],"fullName":"Demo User Write Protection Session State Validation should allow user with isDemo=false","status":"passed","title":"should allow user with isDemo=false","duration":0.5434999999999945,"failureMessages":[],"meta":{}},{"ancestorTitles":["Demo User Write Protection","Session State Validation"],"fullName":"Demo User Write Protection Session State Validation should block user with no session (unauthenticated)","status":"failed","title":"should block user with no session (unauthenticated)","duration":2.1351000000000795,"failureMessages":["AssertionError: expected [ 401, 403 ] to include 415\n    at Proxy.<anonymous> (file:///D:/Dev/CRM/node_modules/@vitest/expect/dist/index.js:1191:15)\n    at Proxy.<anonymous> (file:///D:/Dev/CRM/node_modules/@vitest/expect/dist/index.js:1029:14)\n    at Proxy.methodWrapper (file:///D:/Dev/CRM/node_modules/chai/index.js:1686:25)\n    at D:\\Dev\\CRM\\__tests__\\api\\demo-protection.test.ts:351:26\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///D:/Dev/CRM/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}}],"startTime":1760733129621,"endTime":1760733129659.135,"status":"failed","message":"","name":"D:/Dev/CRM/__tests__/api/demo-protection.test.ts"},{"assertionResults":[{"ancestorTitles":["Contacts Import Wizard - Happy Path"],"fullName":"Contacts Import Wizard - Happy Path completes full import workflow successfully","status":"passed","title":"completes full import workflow successfully","duration":3.6163999999999987,"failureMessages":[],"meta":{}},{"ancestorTitles":["Contacts Import Wizard - Happy Path"],"fullName":"Contacts Import Wizard - Happy Path handles undo/rollback functionality","status":"passed","title":"handles undo/rollback functionality","duration":0.311300000000017,"failureMessages":[],"meta":{}},{"ancestorTitles":["Contacts Import Wizard - Happy Path"],"fullName":"Contacts Import Wizard - Happy Path validates data integrity throughout the process","status":"passed","title":"validates data integrity throughout the process","duration":0.2277000000000271,"failureMessages":[],"meta":{}}],"startTime":1760733131096,"endTime":1760733131100.3113,"status":"passed","message":"","name":"D:/Dev/CRM/src/components/import/ImportWizard.happy-path.test.tsx"},{"assertionResults":[{"ancestorTitles":["ImportWizard API Integration"],"fullName":"ImportWizard API Integration handles successful import API response","status":"passed","title":"handles successful import API response","duration":2.0850999999999544,"failureMessages":[],"meta":{}},{"ancestorTitles":["ImportWizard API Integration"],"fullName":"ImportWizard API Integration validates field mapping logic","status":"passed","title":"validates field mapping logic","duration":0.3686999999999898,"failureMessages":[],"meta":{}},{"ancestorTitles":["ImportWizard API Integration"],"fullName":"ImportWizard API Integration validates CSV parsing setup","status":"passed","title":"validates CSV parsing setup","duration":1.283200000000079,"failureMessages":[],"meta":{}}],"startTime":1760733133156,"endTime":1760733133160.2832,"status":"passed","message":"","name":"D:/Dev/CRM/src/components/import/ImportWizard.test.tsx"},{"assertionResults":[{"ancestorTitles":["demoProcedure"],"fullName":"demoProcedure should export a demo procedure","status":"passed","title":"should export a demo procedure","duration":0.7936000000000831,"failureMessages":[],"meta":{}},{"ancestorTitles":["demoProcedure"],"fullName":"demoProcedure should have mutation method","status":"passed","title":"should have mutation method","duration":0.1674999999999045,"failureMessages":[],"meta":{}},{"ancestorTitles":["demoProcedure"],"fullName":"demoProcedure should have query method","status":"passed","title":"should have query method","duration":0.1007000000000744,"failureMessages":[],"meta":{}},{"ancestorTitles":["demoProcedure"],"fullName":"demoProcedure should have subscription method","status":"passed","title":"should have subscription method","duration":0.06389999999998963,"failureMessages":[],"meta":{}}],"startTime":1760733135909,"endTime":1760733135911.064,"status":"passed","message":"","name":"D:/Dev/CRM/src/server/trpc/trpc.test.ts"},{"assertionResults":[{"ancestorTitles":["Offline Modules"],"fullName":"Offline Modules should import offline storage","status":"passed","title":"should import offline storage","duration":14.405899999999974,"failureMessages":[],"meta":{}},{"ancestorTitles":["Offline Modules"],"fullName":"Offline Modules should import outbox manager","status":"passed","title":"should import outbox manager","duration":19.934799999999996,"failureMessages":[],"meta":{}},{"ancestorTitles":["Offline Modules"],"fullName":"Offline Modules should import query cache","status":"passed","title":"should import query cache","duration":9.517399999999952,"failureMessages":[],"meta":{}}],"startTime":1760733128855,"endTime":1760733128898.5173,"status":"passed","message":"","name":"D:/Dev/CRM/src/lib/__tests__/offline.test.ts"},{"assertionResults":[{"ancestorTitles":["Plan Limits","checkPlanLimit"],"fullName":"Plan Limits checkPlanLimit should allow creation when under limit","status":"passed","title":"should allow creation when under limit","duration":1.7060000000000173,"failureMessages":[],"meta":{}},{"ancestorTitles":["Plan Limits","checkPlanLimit"],"fullName":"Plan Limits checkPlanLimit should block creation when at limit","status":"passed","title":"should block creation when at limit","duration":0.5874000000000024,"failureMessages":[],"meta":{}},{"ancestorTitles":["Plan Limits","checkPlanLimit"],"fullName":"Plan Limits checkPlanLimit should allow unlimited resources for TEAM plan","status":"passed","title":"should allow unlimited resources for TEAM plan","duration":0.3006999999998925,"failureMessages":[],"meta":{}},{"ancestorTitles":["Plan Limits","checkPlanLimit"],"fullName":"Plan Limits checkPlanLimit should block pipeline creation when at FREE limit","status":"passed","title":"should block pipeline creation when at FREE limit","duration":0.3162999999999556,"failureMessages":[],"meta":{}},{"ancestorTitles":["Plan Limits","checkPlanLimit"],"fullName":"Plan Limits checkPlanLimit should allow pipeline creation when under FREE limit","status":"passed","title":"should allow pipeline creation when under FREE limit","duration":0.4963999999999942,"failureMessages":[],"meta":{}},{"ancestorTitles":["Plan Limits","PLAN_LIMITS"],"fullName":"Plan Limits PLAN_LIMITS should have correct FREE plan limits","status":"passed","title":"should have correct FREE plan limits","duration":0.21469999999999345,"failureMessages":[],"meta":{}},{"ancestorTitles":["Plan Limits","PLAN_LIMITS"],"fullName":"Plan Limits PLAN_LIMITS should have correct PRO plan limits","status":"passed","title":"should have correct PRO plan limits","duration":0.10199999999997544,"failureMessages":[],"meta":{}},{"ancestorTitles":["Plan Limits","PLAN_LIMITS"],"fullName":"Plan Limits PLAN_LIMITS should have unlimited TEAM plan limits","status":"passed","title":"should have unlimited TEAM plan limits","duration":0.08299999999996999,"failureMessages":[],"meta":{}}],"startTime":1760733133157,"endTime":1760733133161.102,"status":"passed","message":"","name":"D:/Dev/CRM/src/lib/__tests__/plans.test.ts"},{"assertionResults":[{"ancestorTitles":["activitiesRouter"],"fullName":"activitiesRouter should export a tRPC router","status":"passed","title":"should export a tRPC router","duration":0.8766000000000531,"failureMessages":[],"meta":{}},{"ancestorTitles":["activitiesRouter"],"fullName":"activitiesRouter should have all required procedures","status":"passed","title":"should have all required procedures","duration":0.2358999999999014,"failureMessages":[],"meta":{}},{"ancestorTitles":["activitiesRouter"],"fullName":"activitiesRouter should have proper procedure types","status":"passed","title":"should have proper procedure types","duration":0.14429999999993015,"failureMessages":[],"meta":{}}],"startTime":1760733136550,"endTime":1760733136551.2358,"status":"passed","message":"","name":"D:/Dev/CRM/src/server/trpc/routers/activities.test.ts"},{"assertionResults":[{"ancestorTitles":["companiesRouter"],"fullName":"companiesRouter should export a tRPC router","status":"passed","title":"should export a tRPC router","duration":0.918700000000058,"failureMessages":[],"meta":{}},{"ancestorTitles":["companiesRouter"],"fullName":"companiesRouter should have all required procedures","status":"passed","title":"should have all required procedures","duration":0.2742000000000644,"failureMessages":[],"meta":{}},{"ancestorTitles":["companiesRouter"],"fullName":"companiesRouter should have proper procedure types","status":"passed","title":"should have proper procedure types","duration":0.148900000000026,"failureMessages":[],"meta":{}}],"startTime":1760733135140,"endTime":1760733135141.149,"status":"passed","message":"","name":"D:/Dev/CRM/src/server/trpc/routers/companies.test.ts"},{"assertionResults":[{"ancestorTitles":["Contacts Feature - Smoke Tests","Contacts List"],"fullName":"Contacts Feature - Smoke Tests Contacts List should list contacts with pagination (25/page)","status":"failed","title":"should list contacts with pagination (25/page)","duration":1967.2032999999997,"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.contact.create()` invocation in\nD:\\Dev\\CRM\\src\\server\\trpc\\routers\\contacts.smoke.test.ts:82:26\n\n  79 // Create 30 contacts\n  80 const contacts = await Promise.all(\n  81   Array.from({ length: 30 }, (_, i) =>\nΓåÆ 82     prisma.contact.create(\nForeign key constraint violated: `contacts_organizationId_fkey (index)`\n    at $n.handleRequestError (D:\\Dev\\CRM\\node_modules\\@prisma\\client\\runtime\\library.js:121:7315)\n    at $n.handleAndLogRequestError (D:\\Dev\\CRM\\node_modules\\@prisma\\client\\runtime\\library.js:121:6623)\n    at $n.request (D:\\Dev\\CRM\\node_modules\\@prisma\\client\\runtime\\library.js:121:6307)\n    at l (D:\\Dev\\CRM\\node_modules\\@prisma\\client\\runtime\\library.js:130:9633)\n    at async Promise.all (index 6)\n    at D:\\Dev\\CRM\\src\\server\\trpc\\routers\\contacts.smoke.test.ts:80:24\n    at file:///D:/Dev/CRM/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}},{"ancestorTitles":["Contacts Feature - Smoke Tests","Contacts List"],"fullName":"Contacts Feature - Smoke Tests Contacts List should search contacts by name","status":"failed","title":"should search contacts by name","duration":1387.1112999999996,"failureMessages":["AssertionError: expected 0 to be greater than or equal to 2\n    at D:\\Dev\\CRM\\src\\server\\trpc\\routers\\contacts.smoke.test.ts:164:30\n    at file:///D:/Dev/CRM/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}},{"ancestorTitles":["Contacts Feature - Smoke Tests","Contacts List"],"fullName":"Contacts Feature - Smoke Tests Contacts List should select only needed columns for performance","status":"failed","title":"should select only needed columns for performance","duration":1305.3419999999996,"failureMessages":["AssertionError: expected undefined to be 'Test' // Object.is equality\n    at D:\\Dev\\CRM\\src\\server\\trpc\\routers\\contacts.smoke.test.ts:220:34\n    at file:///D:/Dev/CRM/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}},{"ancestorTitles":["Contacts Feature - Smoke Tests","Contact Create"],"fullName":"Contacts Feature - Smoke Tests Contact Create should create contact with required fields","status":"passed","title":"should create contact with required fields","duration":667.8265000000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["Contacts Feature - Smoke Tests","Contact Create"],"fullName":"Contacts Feature - Smoke Tests Contact Create should create contact with optional fields","status":"passed","title":"should create contact with optional fields","duration":1159.9889999999996,"failureMessages":[],"meta":{}},{"ancestorTitles":["Contacts Feature - Smoke Tests","Contact Create"],"fullName":"Contacts Feature - Smoke Tests Contact Create should validate required fields","status":"passed","title":"should validate required fields","duration":665.7435000000005,"failureMessages":[],"meta":{}},{"ancestorTitles":["Contacts Feature - Smoke Tests","Contact Update"],"fullName":"Contacts Feature - Smoke Tests Contact Update should update contact fields","status":"passed","title":"should update contact fields","duration":1241.8336999999992,"failureMessages":[],"meta":{}},{"ancestorTitles":["Contacts Feature - Smoke Tests","Contact Update"],"fullName":"Contacts Feature - Smoke Tests Contact Update should only update contacts in same organization","status":"failed","title":"should only update contacts in same organization","duration":2083.252200000001,"failureMessages":["AssertionError: expected undefined to be 'Updated' // Object.is equality\n    at D:\\Dev\\CRM\\src\\server\\trpc\\routers\\contacts.smoke.test.ts:365:32\n    at file:///D:/Dev/CRM/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}},{"ancestorTitles":["Contacts Feature - Smoke Tests","Performance"],"fullName":"Contacts Feature - Smoke Tests Performance should list 10k contacts in <120ms","status":"failed","title":"should list 10k contacts in <120ms","duration":1715.7953000000016,"failureMessages":["PrismaClientKnownRequestError: \nInvalid `db.contact.create()` invocation in\nD:\\Dev\\CRM\\tests\\utils\\seed.ts:98:38\n\n  95 \n  96 const contacts = []\n  97 for (let i = 0; i < count; i++) {\nΓåÆ 98   const contact = await db.contact.create(\nForeign key constraint violated: `contacts_organizationId_fkey (index)`\n    at $n.handleRequestError (D:\\Dev\\CRM\\node_modules\\@prisma\\client\\runtime\\library.js:121:7315)\n    at $n.handleAndLogRequestError (D:\\Dev\\CRM\\node_modules\\@prisma\\client\\runtime\\library.js:121:6623)\n    at $n.request (D:\\Dev\\CRM\\node_modules\\@prisma\\client\\runtime\\library.js:121:6307)\n    at l (D:\\Dev\\CRM\\node_modules\\@prisma\\client\\runtime\\library.js:130:9633)\n    at seedContacts (D:\\Dev\\CRM\\tests\\utils\\seed.ts:98:21)\n    at D:\\Dev\\CRM\\src\\server\\trpc\\routers\\contacts.smoke.test.ts:382:24\n    at file:///D:/Dev/CRM/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}}],"startTime":1760733114543,"endTime":1760733126737.7954,"status":"failed","message":"","name":"D:/Dev/CRM/src/server/trpc/routers/contacts.smoke.test.ts"},{"assertionResults":[{"ancestorTitles":["contactsRouter"],"fullName":"contactsRouter should export a tRPC router","status":"passed","title":"should export a tRPC router","duration":0.9144000000000005,"failureMessages":[],"meta":{}},{"ancestorTitles":["contactsRouter"],"fullName":"contactsRouter should have all required procedures","status":"passed","title":"should have all required procedures","duration":0.2362999999999147,"failureMessages":[],"meta":{}},{"ancestorTitles":["contactsRouter"],"fullName":"contactsRouter should have proper procedure types","status":"passed","title":"should have proper procedure types","duration":0.21529999999995653,"failureMessages":[],"meta":{}}],"startTime":1760733135250,"endTime":1760733135251.2363,"status":"passed","message":"","name":"D:/Dev/CRM/src/server/trpc/routers/contacts.test.ts"},{"assertionResults":[{"ancestorTitles":["Deals Board - Stage Movement Unit Tests","Stage Movement Business Logic"],"fullName":"Deals Board - Stage Movement Unit Tests Stage Movement Business Logic should successfully move a deal to a different stage within the same pipeline","status":"failed","title":"should successfully move a deal to a different stage within the same pipeline","duration":2552.4321,"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.deal.update()` invocation in\nD:\\Dev\\CRM\\src\\server\\trpc\\routers\\deals-board.test.ts:85:25\n\n  82 describe('Stage Movement Business Logic', () => {\n  83   it('should successfully move a deal to a different stage within the same pipeline', async () => {\n  84     // Move deal from stage 1 to stage 2\nΓåÆ 85     await prisma.deal.update(\nAn operation failed because it depends on one or more records that were required but not found. Record to update not found.\n    at $n.handleRequestError (D:\\Dev\\CRM\\node_modules\\@prisma\\client\\runtime\\library.js:121:7315)\n    at $n.handleAndLogRequestError (D:\\Dev\\CRM\\node_modules\\@prisma\\client\\runtime\\library.js:121:6623)\n    at $n.request (D:\\Dev\\CRM\\node_modules\\@prisma\\client\\runtime\\library.js:121:6307)\n    at l (D:\\Dev\\CRM\\node_modules\\@prisma\\client\\runtime\\library.js:130:9633)\n    at D:\\Dev\\CRM\\src\\server\\trpc\\routers\\deals-board.test.ts:85:7\n    at file:///D:/Dev/CRM/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}},{"ancestorTitles":["Deals Board - Stage Movement Unit Tests","Stage Movement Business Logic"],"fullName":"Deals Board - Stage Movement Unit Tests Stage Movement Business Logic should move a deal through multiple stages successfully","status":"failed","title":"should move a deal through multiple stages successfully","duration":1327.5519000000004,"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.deal.update()` invocation in\nD:\\Dev\\CRM\\src\\server\\trpc\\routers\\deals-board.test.ts:125:25\n\n  122 expect(deal?.stageId).toBe(pipelineCtx.stages[1].id)\n  123 \n  124 // Move from stage 2 to stage 3\nΓåÆ 125 await prisma.deal.update(\nAn operation failed because it depends on one or more records that were required but not found. Record to update not found.\n    at $n.handleRequestError (D:\\Dev\\CRM\\node_modules\\@prisma\\client\\runtime\\library.js:121:7315)\n    at $n.handleAndLogRequestError (D:\\Dev\\CRM\\node_modules\\@prisma\\client\\runtime\\library.js:121:6623)\n    at $n.request (D:\\Dev\\CRM\\node_modules\\@prisma\\client\\runtime\\library.js:121:6307)\n    at l (D:\\Dev\\CRM\\node_modules\\@prisma\\client\\runtime\\library.js:130:9633)\n    at D:\\Dev\\CRM\\src\\server\\trpc\\routers\\deals-board.test.ts:125:7\n    at file:///D:/Dev/CRM/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}},{"ancestorTitles":["Deals Board - Stage Movement Unit Tests","Stage Movement Business Logic"],"fullName":"Deals Board - Stage Movement Unit Tests Stage Movement Business Logic should prevent moving deals to stages from different pipelines","status":"failed","title":"should prevent moving deals to stages from different pipelines","duration":1285.4062000000004,"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.stage.create()` invocation in\nD:\\Dev\\CRM\\src\\server\\trpc\\routers\\deals-board.test.ts:160:45\n\n  157 })\n  158 \n  159 // Create stage in other pipeline\nΓåÆ 160 const otherStage = await prisma.stage.create(\nForeign key constraint violated: `stages_pipelineId_fkey (index)`\n    at $n.handleRequestError (D:\\Dev\\CRM\\node_modules\\@prisma\\client\\runtime\\library.js:121:7315)\n    at $n.handleAndLogRequestError (D:\\Dev\\CRM\\node_modules\\@prisma\\client\\runtime\\library.js:121:6623)\n    at $n.request (D:\\Dev\\CRM\\node_modules\\@prisma\\client\\runtime\\library.js:121:6307)\n    at l (D:\\Dev\\CRM\\node_modules\\@prisma\\client\\runtime\\library.js:130:9633)\n    at D:\\Dev\\CRM\\src\\server\\trpc\\routers\\deals-board.test.ts:160:26\n    at file:///D:/Dev/CRM/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}},{"ancestorTitles":["Deals Board - Stage Movement Unit Tests","Stage Movement Business Logic"],"fullName":"Deals Board - Stage Movement Unit Tests Stage Movement Business Logic should handle organization isolation correctly","status":"failed","title":"should handle organization isolation correctly","duration":1876.1165,"failureMessages":["AssertionError: expected undefined to be 'cmgvb1eiz001lliw8hd81tg91' // Object.is equality\n    at D:\\Dev\\CRM\\src\\server\\trpc\\routers\\deals-board.test.ts:219:29\n    at file:///D:/Dev/CRM/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}},{"ancestorTitles":["Deals Board - Stage Movement Unit Tests","Weighted totals calculation"],"fullName":"Deals Board - Stage Movement Unit Tests Weighted totals calculation should correctly calculate weighted totals per stage","status":"failed","title":"should correctly calculate weighted totals per stage","duration":1204.3322999999991,"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.deal.createMany()` invocation in\nD:\\Dev\\CRM\\src\\server\\trpc\\routers\\deals-board.test.ts:229:25\n\n  226 describe('Weighted totals calculation', () => {\n  227   it('should correctly calculate weighted totals per stage', async () => {\n  228     // Create multiple deals in different stages with different values and probabilities\nΓåÆ 229     await prisma.deal.createMany(\nForeign key constraint violated: `deals_organizationId_fkey (index)`\n    at $n.handleRequestError (D:\\Dev\\CRM\\node_modules\\@prisma\\client\\runtime\\library.js:121:7315)\n    at $n.handleAndLogRequestError (D:\\Dev\\CRM\\node_modules\\@prisma\\client\\runtime\\library.js:121:6623)\n    at $n.request (D:\\Dev\\CRM\\node_modules\\@prisma\\client\\runtime\\library.js:121:6307)\n    at l (D:\\Dev\\CRM\\node_modules\\@prisma\\client\\runtime\\library.js:130:9633)\n    at D:\\Dev\\CRM\\src\\server\\trpc\\routers\\deals-board.test.ts:229:7\n    at file:///D:/Dev/CRM/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}},{"ancestorTitles":["Deals Board - Stage Movement Unit Tests","Weighted totals calculation"],"fullName":"Deals Board - Stage Movement Unit Tests Weighted totals calculation should handle deals with null values and probabilities","status":"failed","title":"should handle deals with null values and probabilities","duration":1289.054399999999,"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.deal.createMany()` invocation in\nD:\\Dev\\CRM\\src\\server\\trpc\\routers\\deals-board.test.ts:304:25\n\n  301 \n  302 it('should handle deals with null values and probabilities', async () => {\n  303   // Create deals with null values and probabilities\nΓåÆ 304   await prisma.deal.createMany(\nForeign key constraint violated: `deals_organizationId_fkey (index)`\n    at $n.handleRequestError (D:\\Dev\\CRM\\node_modules\\@prisma\\client\\runtime\\library.js:121:7315)\n    at $n.handleAndLogRequestError (D:\\Dev\\CRM\\node_modules\\@prisma\\client\\runtime\\library.js:121:6623)\n    at $n.request (D:\\Dev\\CRM\\node_modules\\@prisma\\client\\runtime\\library.js:121:6307)\n    at l (D:\\Dev\\CRM\\node_modules\\@prisma\\client\\runtime\\library.js:130:9633)\n    at D:\\Dev\\CRM\\src\\server\\trpc\\routers\\deals-board.test.ts:304:7\n    at file:///D:/Dev/CRM/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}},{"ancestorTitles":["Deals Board - Stage Movement Unit Tests","Performance"],"fullName":"Deals Board - Stage Movement Unit Tests Performance should move deals quickly (< 100ms)","status":"passed","title":"should move deals quickly (< 100ms)","duration":752.1445000000003,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deals Board - Stage Movement Unit Tests","Data Integrity"],"fullName":"Deals Board - Stage Movement Unit Tests Data Integrity should maintain referential integrity when moving deals","status":"failed","title":"should maintain referential integrity when moving deals","duration":1185.2016000000003,"failureMessages":["PrismaClientKnownRequestError: \nInvalid `prisma.contact.create()` invocation in\nD:\\Dev\\CRM\\src\\server\\trpc\\routers\\deals-board.test.ts:383:44\n\n  380 describe('Data Integrity', () => {\n  381   it('should maintain referential integrity when moving deals', async () => {\n  382     // Create a contact and company for the deal\nΓåÆ 383     const contact = await prisma.contact.create(\nForeign key constraint violated: `contacts_organizationId_fkey (index)`\n    at $n.handleRequestError (D:\\Dev\\CRM\\node_modules\\@prisma\\client\\runtime\\library.js:121:7315)\n    at $n.handleAndLogRequestError (D:\\Dev\\CRM\\node_modules\\@prisma\\client\\runtime\\library.js:121:6623)\n    at $n.request (D:\\Dev\\CRM\\node_modules\\@prisma\\client\\runtime\\library.js:121:6307)\n    at l (D:\\Dev\\CRM\\node_modules\\@prisma\\client\\runtime\\library.js:130:9633)\n    at D:\\Dev\\CRM\\src\\server\\trpc\\routers\\deals-board.test.ts:383:23\n    at file:///D:/Dev/CRM/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20"],"meta":{}},{"ancestorTitles":["Deals Board - Stage Movement Unit Tests","Data Integrity"],"fullName":"Deals Board - Stage Movement Unit Tests Data Integrity should handle concurrent stage moves correctly","status":"passed","title":"should handle concurrent stage moves correctly","duration":1268.0074000000004,"failureMessages":[],"meta":{}}],"startTime":1760733114652,"endTime":1760733127393.0073,"status":"failed","message":"","name":"D:/Dev/CRM/src/server/trpc/routers/deals-board.test.ts"},{"assertionResults":[{"ancestorTitles":["dealsRouter"],"fullName":"dealsRouter should export a tRPC router","status":"passed","title":"should export a tRPC router","duration":0.8078000000000429,"failureMessages":[],"meta":{}},{"ancestorTitles":["dealsRouter"],"fullName":"dealsRouter should have all required procedures","status":"passed","title":"should have all required procedures","duration":0.2884000000000242,"failureMessages":[],"meta":{}},{"ancestorTitles":["dealsRouter"],"fullName":"dealsRouter should have proper procedure types","status":"passed","title":"should have proper procedure types","duration":0.15880000000004202,"failureMessages":[],"meta":{}}],"startTime":1760733135826,"endTime":1760733135827.2883,"status":"passed","message":"","name":"D:/Dev/CRM/src/server/trpc/routers/deals.test.ts"},{"assertionResults":[{"ancestorTitles":["Saved Views Round-trip Test"],"fullName":"Saved Views Round-trip Test ViewConfig validation works correctly","status":"passed","title":"ViewConfig validation works correctly","duration":2.655300000000011,"failureMessages":[],"meta":{}},{"ancestorTitles":["Saved Views Round-trip Test"],"fullName":"Saved Views Round-trip Test URL encoding/decoding preserves view configuration","status":"passed","title":"URL encoding/decoding preserves view configuration","duration":0.4798999999999296,"failureMessages":[],"meta":{}},{"ancestorTitles":["Saved Views Round-trip Test"],"fullName":"Saved Views Round-trip Test Complex filters are preserved through encoding/decoding","status":"passed","title":"Complex filters are preserved through encoding/decoding","duration":0.40239999999994325,"failureMessages":[],"meta":{}},{"ancestorTitles":["Saved Views Round-trip Test"],"fullName":"Saved Views Round-trip Test View merging works correctly","status":"passed","title":"View merging works correctly","duration":0.5067999999999984,"failureMessages":[],"meta":{}},{"ancestorTitles":["Saved Views Round-trip Test"],"fullName":"Saved Views Round-trip Test Default view configurations are created correctly","status":"passed","title":"Default view configurations are created correctly","duration":0.6440000000000055,"failureMessages":[],"meta":{}},{"ancestorTitles":["Saved Views Round-trip Test"],"fullName":"Saved Views Round-trip Test Database save/load round-trip preserves view configuration","status":"passed","title":"Database save/load round-trip preserves view configuration","duration":0.11779999999998836,"failureMessages":[],"meta":{}},{"ancestorTitles":["Saved Views Round-trip Test"],"fullName":"Saved Views Round-trip Test Public view URL generation and retrieval works","status":"passed","title":"Public view URL generation and retrieval works","duration":0.1209999999999809,"failureMessages":[],"meta":{}},{"ancestorTitles":["Saved Views Round-trip Test"],"fullName":"Saved Views Round-trip Test View starring functionality works","status":"passed","title":"View starring functionality works","duration":0.09569999999996526,"failureMessages":[],"meta":{}},{"ancestorTitles":["Saved Views Round-trip Test"],"fullName":"Saved Views Round-trip Test View ownership and permissions are enforced","status":"passed","title":"View ownership and permissions are enforced","duration":0.19080000000008113,"failureMessages":[],"meta":{}}],"startTime":1760733127761,"endTime":1760733127767.191,"status":"passed","message":"","name":"D:/Dev/CRM/src/lib/server/__tests__/views-round-trip.test.ts"}]}
